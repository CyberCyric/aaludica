{"ast":null,"code":"/*\n * jsGrid v1.5.3 (http://js-grid.com)\n * (c) 2016 Artem Tabalin\n * Licensed under MIT (https://github.com/tabalinas/jsgrid/blob/master/LICENSE)\n */\n(function (window, $, undefined) {\n  var JSGRID = \"JSGrid\",\n      JSGRID_DATA_KEY = JSGRID,\n      JSGRID_ROW_DATA_KEY = \"JSGridItem\",\n      JSGRID_EDIT_ROW_DATA_KEY = \"JSGridEditRow\",\n      SORT_ORDER_ASC = \"asc\",\n      SORT_ORDER_DESC = \"desc\",\n      FIRST_PAGE_PLACEHOLDER = \"{first}\",\n      PAGES_PLACEHOLDER = \"{pages}\",\n      PREV_PAGE_PLACEHOLDER = \"{prev}\",\n      NEXT_PAGE_PLACEHOLDER = \"{next}\",\n      LAST_PAGE_PLACEHOLDER = \"{last}\",\n      PAGE_INDEX_PLACEHOLDER = \"{pageIndex}\",\n      PAGE_COUNT_PLACEHOLDER = \"{pageCount}\",\n      ITEM_COUNT_PLACEHOLDER = \"{itemCount}\",\n      EMPTY_HREF = \"javascript:void(0);\";\n\n  var getOrApply = function (value, context) {\n    if ($.isFunction(value)) {\n      return value.apply(context, $.makeArray(arguments).slice(2));\n    }\n\n    return value;\n  };\n\n  var normalizePromise = function (promise) {\n    var d = $.Deferred();\n\n    if (promise && promise.then) {\n      promise.then(function () {\n        d.resolve.apply(d, arguments);\n      }, function () {\n        d.reject.apply(d, arguments);\n      });\n    } else {\n      d.resolve(promise);\n    }\n\n    return d.promise();\n  };\n\n  var defaultController = {\n    loadData: $.noop,\n    insertItem: $.noop,\n    updateItem: $.noop,\n    deleteItem: $.noop\n  };\n\n  function Grid(element, config) {\n    var $element = $(element);\n    $element.data(JSGRID_DATA_KEY, this);\n    this._container = $element;\n    this.data = [];\n    this.fields = [];\n    this._editingRow = null;\n    this._sortField = null;\n    this._sortOrder = SORT_ORDER_ASC;\n    this._firstDisplayingPage = 1;\n\n    this._init(config);\n\n    this.render();\n  }\n\n  Grid.prototype = {\n    width: \"auto\",\n    height: \"auto\",\n    updateOnResize: true,\n    rowClass: $.noop,\n    rowRenderer: null,\n    rowClick: function (args) {\n      if (this.editing) {\n        this.editItem($(args.event.target).closest(\"tr\"));\n      }\n    },\n    rowDoubleClick: $.noop,\n    noDataContent: \"Not found\",\n    noDataRowClass: \"jsgrid-nodata-row\",\n    heading: true,\n    headerRowRenderer: null,\n    headerRowClass: \"jsgrid-header-row\",\n    headerCellClass: \"jsgrid-header-cell\",\n    filtering: false,\n    filterRowRenderer: null,\n    filterRowClass: \"jsgrid-filter-row\",\n    inserting: false,\n    insertRowRenderer: null,\n    insertRowClass: \"jsgrid-insert-row\",\n    editing: false,\n    editRowRenderer: null,\n    editRowClass: \"jsgrid-edit-row\",\n    confirmDeleting: true,\n    deleteConfirm: \"Are you sure?\",\n    selecting: true,\n    selectedRowClass: \"jsgrid-selected-row\",\n    oddRowClass: \"jsgrid-row\",\n    evenRowClass: \"jsgrid-alt-row\",\n    cellClass: \"jsgrid-cell\",\n    sorting: false,\n    sortableClass: \"jsgrid-header-sortable\",\n    sortAscClass: \"jsgrid-header-sort jsgrid-header-sort-asc\",\n    sortDescClass: \"jsgrid-header-sort jsgrid-header-sort-desc\",\n    paging: false,\n    pagerContainer: null,\n    pageIndex: 1,\n    pageSize: 20,\n    pageButtonCount: 15,\n    pagerFormat: \"Pages: {first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} of {pageCount}\",\n    pagePrevText: \"Prev\",\n    pageNextText: \"Next\",\n    pageFirstText: \"First\",\n    pageLastText: \"Last\",\n    pageNavigatorNextText: \"...\",\n    pageNavigatorPrevText: \"...\",\n    pagerContainerClass: \"jsgrid-pager-container\",\n    pagerClass: \"jsgrid-pager\",\n    pagerNavButtonClass: \"jsgrid-pager-nav-button\",\n    pagerNavButtonInactiveClass: \"jsgrid-pager-nav-inactive-button\",\n    pageClass: \"jsgrid-pager-page\",\n    currentPageClass: \"jsgrid-pager-current-page\",\n    customLoading: false,\n    pageLoading: false,\n    autoload: false,\n    controller: defaultController,\n    loadIndication: true,\n    loadIndicationDelay: 500,\n    loadMessage: \"Please, wait...\",\n    loadShading: true,\n    invalidMessage: \"Invalid data entered!\",\n    invalidNotify: function (args) {\n      var messages = $.map(args.errors, function (error) {\n        return error.message || null;\n      });\n      window.alert([this.invalidMessage].concat(messages).join(\"\\n\"));\n    },\n    onInit: $.noop,\n    onRefreshing: $.noop,\n    onRefreshed: $.noop,\n    onPageChanged: $.noop,\n    onItemDeleting: $.noop,\n    onItemDeleted: $.noop,\n    onItemInserting: $.noop,\n    onItemInserted: $.noop,\n    onItemEditing: $.noop,\n    onItemUpdating: $.noop,\n    onItemUpdated: $.noop,\n    onItemInvalid: $.noop,\n    onDataLoading: $.noop,\n    onDataLoaded: $.noop,\n    onOptionChanging: $.noop,\n    onOptionChanged: $.noop,\n    onError: $.noop,\n    invalidClass: \"jsgrid-invalid\",\n    containerClass: \"jsgrid\",\n    tableClass: \"jsgrid-table\",\n    gridHeaderClass: \"jsgrid-grid-header\",\n    gridBodyClass: \"jsgrid-grid-body\",\n    _init: function (config) {\n      $.extend(this, config);\n\n      this._initLoadStrategy();\n\n      this._initController();\n\n      this._initFields();\n\n      this._attachWindowLoadResize();\n\n      this._attachWindowResizeCallback();\n\n      this._callEventHandler(this.onInit);\n    },\n    loadStrategy: function () {\n      return this.pageLoading ? new jsGrid.loadStrategies.PageLoadingStrategy(this) : new jsGrid.loadStrategies.DirectLoadingStrategy(this);\n    },\n    _initLoadStrategy: function () {\n      this._loadStrategy = getOrApply(this.loadStrategy, this);\n    },\n    _initController: function () {\n      this._controller = $.extend({}, defaultController, getOrApply(this.controller, this));\n    },\n    renderTemplate: function (source, context, config) {\n      args = [];\n\n      for (var key in config) {\n        args.push(config[key]);\n      }\n\n      args.unshift(source, context);\n      source = getOrApply.apply(null, args);\n      return source === undefined || source === null ? \"\" : source;\n    },\n    loadIndicator: function (config) {\n      return new jsGrid.LoadIndicator(config);\n    },\n    validation: function (config) {\n      return jsGrid.Validation && new jsGrid.Validation(config);\n    },\n    _initFields: function () {\n      var self = this;\n      self.fields = $.map(self.fields, function (field) {\n        if ($.isPlainObject(field)) {\n          var fieldConstructor = field.type && jsGrid.fields[field.type] || jsGrid.Field;\n          field = new fieldConstructor(field);\n        }\n\n        field._grid = self;\n        return field;\n      });\n    },\n    _attachWindowLoadResize: function () {\n      $(window).on(\"load\", $.proxy(this._refreshSize, this));\n    },\n    _attachWindowResizeCallback: function () {\n      if (this.updateOnResize) {\n        $(window).on(\"resize\", $.proxy(this._refreshSize, this));\n      }\n    },\n    _detachWindowResizeCallback: function () {\n      $(window).off(\"resize\", this._refreshSize);\n    },\n    option: function (key, value) {\n      var optionChangingEventArgs, optionChangedEventArgs;\n      if (arguments.length === 1) return this[key];\n      optionChangingEventArgs = {\n        option: key,\n        oldValue: this[key],\n        newValue: value\n      };\n\n      this._callEventHandler(this.onOptionChanging, optionChangingEventArgs);\n\n      this._handleOptionChange(optionChangingEventArgs.option, optionChangingEventArgs.newValue);\n\n      optionChangedEventArgs = {\n        option: optionChangingEventArgs.option,\n        value: optionChangingEventArgs.newValue\n      };\n\n      this._callEventHandler(this.onOptionChanged, optionChangedEventArgs);\n    },\n    fieldOption: function (field, key, value) {\n      field = this._normalizeField(field);\n      if (arguments.length === 2) return field[key];\n      field[key] = value;\n\n      this._renderGrid();\n    },\n    _handleOptionChange: function (name, value) {\n      this[name] = value;\n\n      switch (name) {\n        case \"width\":\n        case \"height\":\n          this._refreshSize();\n\n          break;\n\n        case \"rowClass\":\n        case \"rowRenderer\":\n        case \"rowClick\":\n        case \"rowDoubleClick\":\n        case \"noDataRowClass\":\n        case \"noDataContent\":\n        case \"selecting\":\n        case \"selectedRowClass\":\n        case \"oddRowClass\":\n        case \"evenRowClass\":\n          this._refreshContent();\n\n          break;\n\n        case \"pageButtonCount\":\n        case \"pagerFormat\":\n        case \"pagePrevText\":\n        case \"pageNextText\":\n        case \"pageFirstText\":\n        case \"pageLastText\":\n        case \"pageNavigatorNextText\":\n        case \"pageNavigatorPrevText\":\n        case \"pagerClass\":\n        case \"pagerNavButtonClass\":\n        case \"pageClass\":\n        case \"currentPageClass\":\n        case \"pagerRenderer\":\n          this._refreshPager();\n\n          break;\n\n        case \"fields\":\n          this._initFields();\n\n          this.render();\n          break;\n\n        case \"data\":\n        case \"editing\":\n        case \"heading\":\n        case \"filtering\":\n        case \"inserting\":\n        case \"paging\":\n          this.refresh();\n          break;\n\n        case \"loadStrategy\":\n        case \"pageLoading\":\n          this._initLoadStrategy();\n\n          this.search();\n          break;\n\n        case \"pageIndex\":\n          this.openPage(value);\n          break;\n\n        case \"pageSize\":\n          this.refresh();\n          this.search();\n          break;\n\n        case \"editRowRenderer\":\n        case \"editRowClass\":\n          this.cancelEdit();\n          break;\n\n        case \"updateOnResize\":\n          this._detachWindowResizeCallback();\n\n          this._attachWindowResizeCallback();\n\n          break;\n\n        case \"invalidNotify\":\n        case \"invalidMessage\":\n          break;\n\n        default:\n          this.render();\n          break;\n      }\n    },\n    destroy: function () {\n      this._detachWindowResizeCallback();\n\n      this._clear();\n\n      this._container.removeData(JSGRID_DATA_KEY);\n    },\n    render: function () {\n      this._renderGrid();\n\n      return this.autoload ? this.loadData() : $.Deferred().resolve().promise();\n    },\n    _renderGrid: function () {\n      this._clear();\n\n      this._container.addClass(this.containerClass).css(\"position\", \"relative\").append(this._createHeader()).append(this._createBody());\n\n      this._pagerContainer = this._createPagerContainer();\n      this._loadIndicator = this._createLoadIndicator();\n      this._validation = this._createValidation();\n      this.refresh();\n    },\n    _createLoadIndicator: function () {\n      return getOrApply(this.loadIndicator, this, {\n        message: this.loadMessage,\n        shading: this.loadShading,\n        container: this._container\n      });\n    },\n    _createValidation: function () {\n      return getOrApply(this.validation, this);\n    },\n    _clear: function () {\n      this.cancelEdit();\n      clearTimeout(this._loadingTimer);\n      this._pagerContainer && this._pagerContainer.empty();\n\n      this._container.empty().css({\n        position: \"\",\n        width: \"\",\n        height: \"\"\n      });\n    },\n    _createHeader: function () {\n      var $headerRow = this._headerRow = this._createHeaderRow(),\n          $filterRow = this._filterRow = this._createFilterRow(),\n          $insertRow = this._insertRow = this._createInsertRow();\n\n      var $headerGrid = this._headerGrid = $(\"<table>\").addClass(this.tableClass).append($headerRow).append($filterRow).append($insertRow);\n      var $header = this._header = $(\"<div>\").addClass(this.gridHeaderClass).addClass(this._scrollBarWidth() ? \"jsgrid-header-scrollbar\" : \"\").append($headerGrid);\n      return $header;\n    },\n    _createBody: function () {\n      var $content = this._content = $(\"<tbody>\");\n      var $bodyGrid = this._bodyGrid = $(\"<table>\").addClass(this.tableClass).append($content);\n      var $body = this._body = $(\"<div>\").addClass(this.gridBodyClass).append($bodyGrid).on(\"scroll\", $.proxy(function (e) {\n        this._header.scrollLeft(e.target.scrollLeft);\n      }, this));\n      return $body;\n    },\n    _createPagerContainer: function () {\n      var pagerContainer = this.pagerContainer || $(\"<div>\").appendTo(this._container);\n      return $(pagerContainer).addClass(this.pagerContainerClass);\n    },\n    _eachField: function (callBack) {\n      var self = this;\n      $.each(this.fields, function (index, field) {\n        if (field.visible) {\n          callBack.call(self, field, index);\n        }\n      });\n    },\n    _createHeaderRow: function () {\n      if ($.isFunction(this.headerRowRenderer)) return $(this.renderTemplate(this.headerRowRenderer, this));\n      var $result = $(\"<tr>\").addClass(this.headerRowClass);\n\n      this._eachField(function (field, index) {\n        var $th = this._prepareCell(\"<th>\", field, \"headercss\", this.headerCellClass).append(this.renderTemplate(field.headerTemplate, field)).appendTo($result);\n\n        if (this.sorting && field.sorting) {\n          $th.addClass(this.sortableClass).on(\"click\", $.proxy(function () {\n            this.sort(index);\n          }, this));\n        }\n      });\n\n      return $result;\n    },\n    _prepareCell: function (cell, field, cssprop, cellClass) {\n      return $(cell).css(\"width\", field.width).addClass(cellClass || this.cellClass).addClass(cssprop && field[cssprop] || field.css).addClass(field.align ? \"jsgrid-align-\" + field.align : \"\");\n    },\n    _createFilterRow: function () {\n      if ($.isFunction(this.filterRowRenderer)) return $(this.renderTemplate(this.filterRowRenderer, this));\n      var $result = $(\"<tr>\").addClass(this.filterRowClass);\n\n      this._eachField(function (field) {\n        this._prepareCell(\"<td>\", field, \"filtercss\").append(this.renderTemplate(field.filterTemplate, field)).appendTo($result);\n      });\n\n      return $result;\n    },\n    _createInsertRow: function () {\n      if ($.isFunction(this.insertRowRenderer)) return $(this.renderTemplate(this.insertRowRenderer, this));\n      var $result = $(\"<tr>\").addClass(this.insertRowClass);\n\n      this._eachField(function (field) {\n        this._prepareCell(\"<td>\", field, \"insertcss\").append(this.renderTemplate(field.insertTemplate, field)).appendTo($result);\n      });\n\n      return $result;\n    },\n    _callEventHandler: function (handler, eventParams) {\n      handler.call(this, $.extend(eventParams, {\n        grid: this\n      }));\n      return eventParams;\n    },\n    reset: function () {\n      this._resetSorting();\n\n      this._resetPager();\n\n      return this._loadStrategy.reset();\n    },\n    _resetPager: function () {\n      this._firstDisplayingPage = 1;\n\n      this._setPage(1);\n    },\n    _resetSorting: function () {\n      this._sortField = null;\n      this._sortOrder = SORT_ORDER_ASC;\n\n      this._clearSortingCss();\n    },\n    refresh: function () {\n      this._callEventHandler(this.onRefreshing);\n\n      this.cancelEdit();\n\n      this._refreshHeading();\n\n      this._refreshFiltering();\n\n      this._refreshInserting();\n\n      this._refreshContent();\n\n      this._refreshPager();\n\n      this._refreshSize();\n\n      this._callEventHandler(this.onRefreshed);\n    },\n    _refreshHeading: function () {\n      this._headerRow.toggle(this.heading);\n    },\n    _refreshFiltering: function () {\n      this._filterRow.toggle(this.filtering);\n    },\n    _refreshInserting: function () {\n      this._insertRow.toggle(this.inserting);\n    },\n    _refreshContent: function () {\n      var $content = this._content;\n      $content.empty();\n\n      if (!this.data.length) {\n        $content.append(this._createNoDataRow());\n        return this;\n      }\n\n      var indexFrom = this._loadStrategy.firstDisplayIndex();\n\n      var indexTo = this._loadStrategy.lastDisplayIndex();\n\n      for (var itemIndex = indexFrom; itemIndex < indexTo; itemIndex++) {\n        var item = this.data[itemIndex];\n        $content.append(this._createRow(item, itemIndex));\n      }\n    },\n    _createNoDataRow: function () {\n      var amountOfFields = 0;\n\n      this._eachField(function () {\n        amountOfFields++;\n      });\n\n      return $(\"<tr>\").addClass(this.noDataRowClass).append($(\"<td>\").addClass(this.cellClass).attr(\"colspan\", amountOfFields).append(this.renderTemplate(this.noDataContent, this)));\n    },\n    _createRow: function (item, itemIndex) {\n      var $result;\n\n      if ($.isFunction(this.rowRenderer)) {\n        $result = this.renderTemplate(this.rowRenderer, this, {\n          item: item,\n          itemIndex: itemIndex\n        });\n      } else {\n        $result = $(\"<tr>\");\n\n        this._renderCells($result, item);\n      }\n\n      $result.addClass(this._getRowClasses(item, itemIndex)).data(JSGRID_ROW_DATA_KEY, item).on(\"click\", $.proxy(function (e) {\n        this.rowClick({\n          item: item,\n          itemIndex: itemIndex,\n          event: e\n        });\n      }, this)).on(\"dblclick\", $.proxy(function (e) {\n        this.rowDoubleClick({\n          item: item,\n          itemIndex: itemIndex,\n          event: e\n        });\n      }, this));\n\n      if (this.selecting) {\n        this._attachRowHover($result);\n      }\n\n      return $result;\n    },\n    _getRowClasses: function (item, itemIndex) {\n      var classes = [];\n      classes.push((itemIndex + 1) % 2 ? this.oddRowClass : this.evenRowClass);\n      classes.push(getOrApply(this.rowClass, this, item, itemIndex));\n      return classes.join(\" \");\n    },\n    _attachRowHover: function ($row) {\n      var selectedRowClass = this.selectedRowClass;\n      $row.hover(function () {\n        $(this).addClass(selectedRowClass);\n      }, function () {\n        $(this).removeClass(selectedRowClass);\n      });\n    },\n    _renderCells: function ($row, item) {\n      this._eachField(function (field) {\n        $row.append(this._createCell(item, field));\n      });\n\n      return this;\n    },\n    _createCell: function (item, field) {\n      var $result;\n\n      var fieldValue = this._getItemFieldValue(item, field);\n\n      var args = {\n        value: fieldValue,\n        item: item\n      };\n\n      if ($.isFunction(field.cellRenderer)) {\n        $result = this.renderTemplate(field.cellRenderer, field, args);\n      } else {\n        $result = $(\"<td>\").append(this.renderTemplate(field.itemTemplate || fieldValue, field, args));\n      }\n\n      return this._prepareCell($result, field);\n    },\n    _getItemFieldValue: function (item, field) {\n      var props = field.name.split('.');\n      var result = item[props.shift()];\n\n      while (result && props.length) {\n        result = result[props.shift()];\n      }\n\n      return result;\n    },\n    _setItemFieldValue: function (item, field, value) {\n      var props = field.name.split('.');\n      var current = item;\n      var prop = props[0];\n\n      while (current && props.length) {\n        item = current;\n        prop = props.shift();\n        current = item[prop];\n      }\n\n      if (!current) {\n        while (props.length) {\n          item = item[prop] = {};\n          prop = props.shift();\n        }\n      }\n\n      item[prop] = value;\n    },\n    sort: function (field, order) {\n      if ($.isPlainObject(field)) {\n        order = field.order;\n        field = field.field;\n      }\n\n      this._clearSortingCss();\n\n      this._setSortingParams(field, order);\n\n      this._setSortingCss();\n\n      return this._loadStrategy.sort();\n    },\n    _clearSortingCss: function () {\n      this._headerRow.find(\"th\").removeClass(this.sortAscClass).removeClass(this.sortDescClass);\n    },\n    _setSortingParams: function (field, order) {\n      field = this._normalizeField(field);\n      order = order || (this._sortField === field ? this._reversedSortOrder(this._sortOrder) : SORT_ORDER_ASC);\n      this._sortField = field;\n      this._sortOrder = order;\n    },\n    _normalizeField: function (field) {\n      if ($.isNumeric(field)) {\n        return this.fields[field];\n      }\n\n      if (typeof field === \"string\") {\n        return $.grep(this.fields, function (f) {\n          return f.name === field;\n        })[0];\n      }\n\n      return field;\n    },\n    _reversedSortOrder: function (order) {\n      return order === SORT_ORDER_ASC ? SORT_ORDER_DESC : SORT_ORDER_ASC;\n    },\n    _setSortingCss: function () {\n      var fieldIndex = this._visibleFieldIndex(this._sortField);\n\n      this._headerRow.find(\"th\").eq(fieldIndex).addClass(this._sortOrder === SORT_ORDER_ASC ? this.sortAscClass : this.sortDescClass);\n    },\n    _visibleFieldIndex: function (field) {\n      return $.inArray(field, $.grep(this.fields, function (f) {\n        return f.visible;\n      }));\n    },\n    _sortData: function () {\n      var sortFactor = this._sortFactor(),\n          sortField = this._sortField;\n\n      if (sortField) {\n        this.data.sort(function (item1, item2) {\n          return sortFactor * sortField.sortingFunc(item1[sortField.name], item2[sortField.name]);\n        });\n      }\n    },\n    _sortFactor: function () {\n      return this._sortOrder === SORT_ORDER_ASC ? 1 : -1;\n    },\n    _itemsCount: function () {\n      return this._loadStrategy.itemsCount();\n    },\n    _pagesCount: function () {\n      var itemsCount = this._itemsCount(),\n          pageSize = this.pageSize;\n\n      return Math.floor(itemsCount / pageSize) + (itemsCount % pageSize ? 1 : 0);\n    },\n    _refreshPager: function () {\n      var $pagerContainer = this._pagerContainer;\n      $pagerContainer.empty();\n\n      if (this.paging) {\n        $pagerContainer.append(this._createPager());\n      }\n\n      var showPager = this.paging && this._pagesCount() > 1;\n      $pagerContainer.toggle(showPager);\n    },\n    _createPager: function () {\n      var $result;\n\n      if ($.isFunction(this.pagerRenderer)) {\n        $result = $(this.pagerRenderer({\n          pageIndex: this.pageIndex,\n          pageCount: this._pagesCount()\n        }));\n      } else {\n        $result = $(\"<div>\").append(this._createPagerByFormat());\n      }\n\n      $result.addClass(this.pagerClass);\n      return $result;\n    },\n    _createPagerByFormat: function () {\n      var pageIndex = this.pageIndex,\n          pageCount = this._pagesCount(),\n          itemCount = this._itemsCount(),\n          pagerParts = this.pagerFormat.split(\" \");\n\n      return $.map(pagerParts, $.proxy(function (pagerPart) {\n        var result = pagerPart;\n\n        if (pagerPart === PAGES_PLACEHOLDER) {\n          result = this._createPages();\n        } else if (pagerPart === FIRST_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pageFirstText, 1, pageIndex > 1);\n        } else if (pagerPart === PREV_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pagePrevText, pageIndex - 1, pageIndex > 1);\n        } else if (pagerPart === NEXT_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pageNextText, pageIndex + 1, pageIndex < pageCount);\n        } else if (pagerPart === LAST_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pageLastText, pageCount, pageIndex < pageCount);\n        } else if (pagerPart === PAGE_INDEX_PLACEHOLDER) {\n          result = pageIndex;\n        } else if (pagerPart === PAGE_COUNT_PLACEHOLDER) {\n          result = pageCount;\n        } else if (pagerPart === ITEM_COUNT_PLACEHOLDER) {\n          result = itemCount;\n        }\n\n        return $.isArray(result) ? result.concat([\" \"]) : [result, \" \"];\n      }, this));\n    },\n    _createPages: function () {\n      var pageCount = this._pagesCount(),\n          pageButtonCount = this.pageButtonCount,\n          firstDisplayingPage = this._firstDisplayingPage,\n          pages = [];\n\n      if (firstDisplayingPage > 1) {\n        pages.push(this._createPagerPageNavButton(this.pageNavigatorPrevText, this.showPrevPages));\n      }\n\n      for (var i = 0, pageNumber = firstDisplayingPage; i < pageButtonCount && pageNumber <= pageCount; i++, pageNumber++) {\n        pages.push(pageNumber === this.pageIndex ? this._createPagerCurrentPage() : this._createPagerPage(pageNumber));\n      }\n\n      if (firstDisplayingPage + pageButtonCount - 1 < pageCount) {\n        pages.push(this._createPagerPageNavButton(this.pageNavigatorNextText, this.showNextPages));\n      }\n\n      return pages;\n    },\n    _createPagerNavButton: function (text, pageIndex, isActive) {\n      return this._createPagerButton(text, this.pagerNavButtonClass + (isActive ? \"\" : \" \" + this.pagerNavButtonInactiveClass), isActive ? function () {\n        this.openPage(pageIndex);\n      } : $.noop);\n    },\n    _createPagerPageNavButton: function (text, handler) {\n      return this._createPagerButton(text, this.pagerNavButtonClass, handler);\n    },\n    _createPagerPage: function (pageIndex) {\n      return this._createPagerButton(pageIndex, this.pageClass, function () {\n        this.openPage(pageIndex);\n      });\n    },\n    _createPagerButton: function (text, css, handler) {\n      var $link = $(\"<a>\").attr(\"href\", EMPTY_HREF).html(text).on(\"click\", $.proxy(handler, this));\n      return $(\"<span>\").addClass(css).append($link);\n    },\n    _createPagerCurrentPage: function () {\n      return $(\"<span>\").addClass(this.pageClass).addClass(this.currentPageClass).text(this.pageIndex);\n    },\n    _refreshSize: function () {\n      this._refreshHeight();\n\n      this._refreshWidth();\n    },\n    _refreshWidth: function () {\n      var width = this.width === \"auto\" ? this._getAutoWidth() : this.width;\n\n      this._container.width(width);\n    },\n    _getAutoWidth: function () {\n      var $headerGrid = this._headerGrid,\n          $header = this._header;\n      $headerGrid.width(\"auto\");\n      var contentWidth = $headerGrid.outerWidth();\n      var borderWidth = $header.outerWidth() - $header.innerWidth();\n      $headerGrid.width(\"\");\n      return contentWidth + borderWidth;\n    },\n    _scrollBarWidth: function () {\n      var result;\n      return function () {\n        if (result === undefined) {\n          var $ghostContainer = $(\"<div style='width:50px;height:50px;overflow:hidden;position:absolute;top:-10000px;left:-10000px;'></div>\");\n          var $ghostContent = $(\"<div style='height:100px;'></div>\");\n          $ghostContainer.append($ghostContent).appendTo(\"body\");\n          var width = $ghostContent.innerWidth();\n          $ghostContainer.css(\"overflow-y\", \"auto\");\n          var widthExcludingScrollBar = $ghostContent.innerWidth();\n          $ghostContainer.remove();\n          result = width - widthExcludingScrollBar;\n        }\n\n        return result;\n      };\n    }(),\n    _refreshHeight: function () {\n      var container = this._container,\n          pagerContainer = this._pagerContainer,\n          height = this.height,\n          nonBodyHeight;\n      container.height(height);\n\n      if (height !== \"auto\") {\n        height = container.height();\n        nonBodyHeight = this._header.outerHeight(true);\n\n        if (pagerContainer.parents(container).length) {\n          nonBodyHeight += pagerContainer.outerHeight(true);\n        }\n\n        this._body.outerHeight(height - nonBodyHeight);\n      }\n    },\n    showPrevPages: function () {\n      var firstDisplayingPage = this._firstDisplayingPage,\n          pageButtonCount = this.pageButtonCount;\n      this._firstDisplayingPage = firstDisplayingPage > pageButtonCount ? firstDisplayingPage - pageButtonCount : 1;\n\n      this._refreshPager();\n    },\n    showNextPages: function () {\n      var firstDisplayingPage = this._firstDisplayingPage,\n          pageButtonCount = this.pageButtonCount,\n          pageCount = this._pagesCount();\n\n      this._firstDisplayingPage = firstDisplayingPage + 2 * pageButtonCount > pageCount ? pageCount - pageButtonCount + 1 : firstDisplayingPage + pageButtonCount;\n\n      this._refreshPager();\n    },\n    openPage: function (pageIndex) {\n      if (pageIndex < 1 || pageIndex > this._pagesCount()) return;\n\n      this._setPage(pageIndex);\n\n      this._loadStrategy.openPage(pageIndex);\n    },\n    _setPage: function (pageIndex) {\n      var firstDisplayingPage = this._firstDisplayingPage,\n          pageButtonCount = this.pageButtonCount;\n      this.pageIndex = pageIndex;\n\n      if (pageIndex < firstDisplayingPage) {\n        this._firstDisplayingPage = pageIndex;\n      }\n\n      if (pageIndex > firstDisplayingPage + pageButtonCount - 1) {\n        this._firstDisplayingPage = pageIndex - pageButtonCount + 1;\n      }\n\n      this._callEventHandler(this.onPageChanged, {\n        pageIndex: pageIndex\n      });\n    },\n    _controllerCall: function (method, param, isCanceled, doneCallback) {\n      if (isCanceled) return $.Deferred().reject().promise();\n\n      this._showLoading();\n\n      var controller = this._controller;\n\n      if (!controller || !controller[method]) {\n        throw Error(\"controller has no method '\" + method + \"'\");\n      }\n\n      return normalizePromise(controller[method](param)).done($.proxy(doneCallback, this)).fail($.proxy(this._errorHandler, this)).always($.proxy(this._hideLoading, this));\n    },\n    _errorHandler: function () {\n      this._callEventHandler(this.onError, {\n        args: $.makeArray(arguments)\n      });\n    },\n    _showLoading: function () {\n      if (!this.loadIndication) return;\n      clearTimeout(this._loadingTimer);\n      this._loadingTimer = setTimeout($.proxy(function () {\n        this._loadIndicator.show();\n      }, this), this.loadIndicationDelay);\n    },\n    _hideLoading: function () {\n      if (!this.loadIndication) return;\n      clearTimeout(this._loadingTimer);\n\n      this._loadIndicator.hide();\n    },\n    search: function (filter) {\n      this._resetSorting();\n\n      this._resetPager();\n\n      return this.loadData(filter);\n    },\n    loadData: function (filter) {\n      filter = filter || (this.filtering ? this.getFilter() : {});\n      $.extend(filter, this._loadStrategy.loadParams(), this._sortingParams());\n\n      var args = this._callEventHandler(this.onDataLoading, {\n        filter: filter\n      });\n\n      return this._controllerCall(\"loadData\", filter, args.cancel, function (loadedData) {\n        if (!loadedData) return;\n\n        this._loadStrategy.finishLoad(loadedData);\n\n        this._callEventHandler(this.onDataLoaded, {\n          data: loadedData\n        });\n      });\n    },\n    getFilter: function () {\n      var result = {};\n\n      this._eachField(function (field) {\n        if (field.filtering) {\n          this._setItemFieldValue(result, field, field.filterValue());\n        }\n      });\n\n      return result;\n    },\n    _sortingParams: function () {\n      if (this.sorting && this._sortField) {\n        return {\n          sortField: this._sortField.name,\n          sortOrder: this._sortOrder\n        };\n      }\n\n      return {};\n    },\n    getSorting: function () {\n      var sortingParams = this._sortingParams();\n\n      return {\n        field: sortingParams.sortField,\n        order: sortingParams.sortOrder\n      };\n    },\n    clearFilter: function () {\n      var $filterRow = this._createFilterRow();\n\n      this._filterRow.replaceWith($filterRow);\n\n      this._filterRow = $filterRow;\n      return this.search();\n    },\n    insertItem: function (item) {\n      var insertingItem = item || this._getValidatedInsertItem();\n\n      if (!insertingItem) return $.Deferred().reject().promise();\n\n      var args = this._callEventHandler(this.onItemInserting, {\n        item: insertingItem\n      });\n\n      return this._controllerCall(\"insertItem\", insertingItem, args.cancel, function (insertedItem) {\n        insertedItem = insertedItem || insertingItem;\n\n        this._loadStrategy.finishInsert(insertedItem);\n\n        this._callEventHandler(this.onItemInserted, {\n          item: insertedItem\n        });\n      });\n    },\n    _getValidatedInsertItem: function () {\n      var item = this._getInsertItem();\n\n      return this._validateItem(item, this._insertRow) ? item : null;\n    },\n    _getInsertItem: function () {\n      var result = {};\n\n      this._eachField(function (field) {\n        if (field.inserting) {\n          this._setItemFieldValue(result, field, field.insertValue());\n        }\n      });\n\n      return result;\n    },\n    _validateItem: function (item, $row) {\n      var validationErrors = [];\n      var args = {\n        item: item,\n        itemIndex: this._rowIndex($row),\n        row: $row\n      };\n\n      this._eachField(function (field) {\n        if (!field.validate || $row === this._insertRow && !field.inserting || $row === this._getEditRow() && !field.editing) return;\n\n        var fieldValue = this._getItemFieldValue(item, field);\n\n        var errors = this._validation.validate($.extend({\n          value: fieldValue,\n          rules: field.validate\n        }, args));\n\n        this._setCellValidity($row.children().eq(this._visibleFieldIndex(field)), errors);\n\n        if (!errors.length) return;\n        validationErrors.push.apply(validationErrors, $.map(errors, function (message) {\n          return {\n            field: field,\n            message: message\n          };\n        }));\n      });\n\n      if (!validationErrors.length) return true;\n      var invalidArgs = $.extend({\n        errors: validationErrors\n      }, args);\n\n      this._callEventHandler(this.onItemInvalid, invalidArgs);\n\n      this.invalidNotify(invalidArgs);\n      return false;\n    },\n    _setCellValidity: function ($cell, errors) {\n      $cell.toggleClass(this.invalidClass, !!errors.length).attr(\"title\", errors.join(\"\\n\"));\n    },\n    clearInsert: function () {\n      var insertRow = this._createInsertRow();\n\n      this._insertRow.replaceWith(insertRow);\n\n      this._insertRow = insertRow;\n      this.refresh();\n    },\n    editItem: function (item) {\n      var $row = this.rowByItem(item);\n\n      if ($row.length) {\n        this._editRow($row);\n      }\n    },\n    rowByItem: function (item) {\n      if (item.jquery || item.nodeType) return $(item);\n      return this._content.find(\"tr\").filter(function () {\n        return $.data(this, JSGRID_ROW_DATA_KEY) === item;\n      });\n    },\n    _editRow: function ($row) {\n      if (!this.editing) return;\n      var item = $row.data(JSGRID_ROW_DATA_KEY);\n\n      var args = this._callEventHandler(this.onItemEditing, {\n        row: $row,\n        item: item,\n        itemIndex: this._itemIndex(item)\n      });\n\n      if (args.cancel) return;\n\n      if (this._editingRow) {\n        this.cancelEdit();\n      }\n\n      var $editRow = this._createEditRow(item);\n\n      this._editingRow = $row;\n      $row.hide();\n      $editRow.insertBefore($row);\n      $row.data(JSGRID_EDIT_ROW_DATA_KEY, $editRow);\n    },\n    _createEditRow: function (item) {\n      if ($.isFunction(this.editRowRenderer)) {\n        return $(this.renderTemplate(this.editRowRenderer, this, {\n          item: item,\n          itemIndex: this._itemIndex(item)\n        }));\n      }\n\n      var $result = $(\"<tr>\").addClass(this.editRowClass);\n\n      this._eachField(function (field) {\n        var fieldValue = this._getItemFieldValue(item, field);\n\n        this._prepareCell(\"<td>\", field, \"editcss\").append(this.renderTemplate(field.editTemplate || \"\", field, {\n          value: fieldValue,\n          item: item\n        })).appendTo($result);\n      });\n\n      return $result;\n    },\n    updateItem: function (item, editedItem) {\n      if (arguments.length === 1) {\n        editedItem = item;\n      }\n\n      var $row = item ? this.rowByItem(item) : this._editingRow;\n      editedItem = editedItem || this._getValidatedEditedItem();\n      if (!editedItem) return;\n      return this._updateRow($row, editedItem);\n    },\n    _getValidatedEditedItem: function () {\n      var item = this._getEditedItem();\n\n      return this._validateItem(item, this._getEditRow()) ? item : null;\n    },\n    _updateRow: function ($updatingRow, editedItem) {\n      var updatingItem = $updatingRow.data(JSGRID_ROW_DATA_KEY),\n          updatingItemIndex = this._itemIndex(updatingItem),\n          updatedItem = $.extend(true, {}, updatingItem, editedItem);\n\n      var args = this._callEventHandler(this.onItemUpdating, {\n        row: $updatingRow,\n        item: updatedItem,\n        itemIndex: updatingItemIndex,\n        previousItem: updatingItem\n      });\n\n      return this._controllerCall(\"updateItem\", updatedItem, args.cancel, function (loadedUpdatedItem) {\n        var previousItem = $.extend(true, {}, updatingItem);\n        updatedItem = loadedUpdatedItem || $.extend(true, updatingItem, editedItem);\n\n        var $updatedRow = this._finishUpdate($updatingRow, updatedItem, updatingItemIndex);\n\n        this._callEventHandler(this.onItemUpdated, {\n          row: $updatedRow,\n          item: updatedItem,\n          itemIndex: updatingItemIndex,\n          previousItem: previousItem\n        });\n      });\n    },\n    _rowIndex: function (row) {\n      return this._content.children().index($(row));\n    },\n    _itemIndex: function (item) {\n      return $.inArray(item, this.data);\n    },\n    _finishUpdate: function ($updatingRow, updatedItem, updatedItemIndex) {\n      this.cancelEdit();\n      this.data[updatedItemIndex] = updatedItem;\n\n      var $updatedRow = this._createRow(updatedItem, updatedItemIndex);\n\n      $updatingRow.replaceWith($updatedRow);\n      return $updatedRow;\n    },\n    _getEditedItem: function () {\n      var result = {};\n\n      this._eachField(function (field) {\n        if (field.editing) {\n          this._setItemFieldValue(result, field, field.editValue());\n        }\n      });\n\n      return result;\n    },\n    cancelEdit: function () {\n      if (!this._editingRow) return;\n\n      this._getEditRow().remove();\n\n      this._editingRow.show();\n\n      this._editingRow = null;\n    },\n    _getEditRow: function () {\n      return this._editingRow && this._editingRow.data(JSGRID_EDIT_ROW_DATA_KEY);\n    },\n    deleteItem: function (item) {\n      var $row = this.rowByItem(item);\n      if (!$row.length) return;\n      if (this.confirmDeleting && !window.confirm(getOrApply(this.deleteConfirm, this, $row.data(JSGRID_ROW_DATA_KEY)))) return;\n      return this._deleteRow($row);\n    },\n    _deleteRow: function ($row) {\n      var deletingItem = $row.data(JSGRID_ROW_DATA_KEY),\n          deletingItemIndex = this._itemIndex(deletingItem);\n\n      var args = this._callEventHandler(this.onItemDeleting, {\n        row: $row,\n        item: deletingItem,\n        itemIndex: deletingItemIndex\n      });\n\n      return this._controllerCall(\"deleteItem\", deletingItem, args.cancel, function () {\n        this._loadStrategy.finishDelete(deletingItem, deletingItemIndex);\n\n        this._callEventHandler(this.onItemDeleted, {\n          row: $row,\n          item: deletingItem,\n          itemIndex: deletingItemIndex\n        });\n      });\n    }\n  };\n\n  $.fn.jsGrid = function (config) {\n    var args = $.makeArray(arguments),\n        methodArgs = args.slice(1),\n        result = this;\n    this.each(function () {\n      var $element = $(this),\n          instance = $element.data(JSGRID_DATA_KEY),\n          methodResult;\n\n      if (instance) {\n        if (typeof config === \"string\") {\n          methodResult = instance[config].apply(instance, methodArgs);\n\n          if (methodResult !== undefined && methodResult !== instance) {\n            result = methodResult;\n            return false;\n          }\n        } else {\n          instance._detachWindowResizeCallback();\n\n          instance._init(config);\n\n          instance.render();\n        }\n      } else {\n        new Grid($element, config);\n      }\n    });\n    return result;\n  };\n\n  var fields = {};\n\n  var setDefaults = function (config) {\n    var componentPrototype;\n\n    if ($.isPlainObject(config)) {\n      componentPrototype = Grid.prototype;\n    } else {\n      componentPrototype = fields[config].prototype;\n      config = arguments[1] || {};\n    }\n\n    $.extend(componentPrototype, config);\n  };\n\n  var locales = {};\n\n  var locale = function (lang) {\n    var localeConfig = $.isPlainObject(lang) ? lang : locales[lang];\n    if (!localeConfig) throw Error(\"unknown locale \" + lang);\n    setLocale(jsGrid, localeConfig);\n  };\n\n  var setLocale = function (obj, localeConfig) {\n    $.each(localeConfig, function (field, value) {\n      if ($.isPlainObject(value)) {\n        setLocale(obj[field] || obj[field[0].toUpperCase() + field.slice(1)], value);\n        return;\n      }\n\n      if (obj.hasOwnProperty(field)) {\n        obj[field] = value;\n      } else {\n        obj.prototype[field] = value;\n      }\n    });\n  };\n\n  window.jsGrid = {\n    Grid: Grid,\n    fields: fields,\n    setDefaults: setDefaults,\n    locales: locales,\n    locale: locale,\n    version: '1.5.3'\n  };\n})(window, jQuery);\n\n(function (jsGrid, $, undefined) {\n  function LoadIndicator(config) {\n    this._init(config);\n  }\n\n  LoadIndicator.prototype = {\n    container: \"body\",\n    message: \"Loading...\",\n    shading: true,\n    zIndex: 1000,\n    shaderClass: \"jsgrid-load-shader\",\n    loadPanelClass: \"jsgrid-load-panel\",\n    _init: function (config) {\n      $.extend(true, this, config);\n\n      this._initContainer();\n\n      this._initShader();\n\n      this._initLoadPanel();\n    },\n    _initContainer: function () {\n      this._container = $(this.container);\n    },\n    _initShader: function () {\n      if (!this.shading) return;\n      this._shader = $(\"<div>\").addClass(this.shaderClass).hide().css({\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        zIndex: this.zIndex\n      }).appendTo(this._container);\n    },\n    _initLoadPanel: function () {\n      this._loadPanel = $(\"<div>\").addClass(this.loadPanelClass).text(this.message).hide().css({\n        position: \"absolute\",\n        top: \"50%\",\n        left: \"50%\",\n        zIndex: this.zIndex\n      }).appendTo(this._container);\n    },\n    show: function () {\n      var $loadPanel = this._loadPanel.show();\n\n      var actualWidth = $loadPanel.outerWidth();\n      var actualHeight = $loadPanel.outerHeight();\n      $loadPanel.css({\n        marginTop: -actualHeight / 2,\n        marginLeft: -actualWidth / 2\n      });\n\n      this._shader.show();\n    },\n    hide: function () {\n      this._loadPanel.hide();\n\n      this._shader.hide();\n    }\n  };\n  jsGrid.LoadIndicator = LoadIndicator;\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n  function DirectLoadingStrategy(grid) {\n    this._grid = grid;\n  }\n\n  DirectLoadingStrategy.prototype = {\n    firstDisplayIndex: function () {\n      var grid = this._grid;\n      return grid.option(\"paging\") ? (grid.option(\"pageIndex\") - 1) * grid.option(\"pageSize\") : 0;\n    },\n    lastDisplayIndex: function () {\n      var grid = this._grid;\n      var itemsCount = grid.option(\"data\").length;\n      return grid.option(\"paging\") ? Math.min(grid.option(\"pageIndex\") * grid.option(\"pageSize\"), itemsCount) : itemsCount;\n    },\n    itemsCount: function () {\n      return this._grid.option(\"data\").length;\n    },\n    openPage: function (index) {\n      this._grid.refresh();\n    },\n    loadParams: function () {\n      return {};\n    },\n    sort: function () {\n      this._grid._sortData();\n\n      this._grid.refresh();\n\n      return $.Deferred().resolve().promise();\n    },\n    reset: function () {\n      this._grid.refresh();\n\n      return $.Deferred().resolve().promise();\n    },\n    finishLoad: function (loadedData) {\n      this._grid.option(\"data\", loadedData);\n    },\n    finishInsert: function (insertedItem) {\n      var grid = this._grid;\n      grid.option(\"data\").push(insertedItem);\n      grid.refresh();\n    },\n    finishDelete: function (deletedItem, deletedItemIndex) {\n      var grid = this._grid;\n      grid.option(\"data\").splice(deletedItemIndex, 1);\n      grid.reset();\n    }\n  };\n\n  function PageLoadingStrategy(grid) {\n    this._grid = grid;\n    this._itemsCount = 0;\n  }\n\n  PageLoadingStrategy.prototype = {\n    firstDisplayIndex: function () {\n      return 0;\n    },\n    lastDisplayIndex: function () {\n      return this._grid.option(\"data\").length;\n    },\n    itemsCount: function () {\n      return this._itemsCount;\n    },\n    openPage: function (index) {\n      this._grid.loadData();\n    },\n    loadParams: function () {\n      var grid = this._grid;\n      return {\n        pageIndex: grid.option(\"pageIndex\"),\n        pageSize: grid.option(\"pageSize\")\n      };\n    },\n    reset: function () {\n      return this._grid.loadData();\n    },\n    sort: function () {\n      return this._grid.loadData();\n    },\n    finishLoad: function (loadedData) {\n      this._itemsCount = loadedData.itemsCount;\n\n      this._grid.option(\"data\", loadedData.data);\n    },\n    finishInsert: function (insertedItem) {\n      this._grid.search();\n    },\n    finishDelete: function (deletedItem, deletedItemIndex) {\n      this._grid.search();\n    }\n  };\n  jsGrid.loadStrategies = {\n    DirectLoadingStrategy: DirectLoadingStrategy,\n    PageLoadingStrategy: PageLoadingStrategy\n  };\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n  var isDefined = function (val) {\n    return typeof val !== \"undefined\" && val !== null;\n  };\n\n  var sortStrategies = {\n    string: function (str1, str2) {\n      if (!isDefined(str1) && !isDefined(str2)) return 0;\n      if (!isDefined(str1)) return -1;\n      if (!isDefined(str2)) return 1;\n      return (\"\" + str1).localeCompare(\"\" + str2);\n    },\n    number: function (n1, n2) {\n      return n1 - n2;\n    },\n    date: function (dt1, dt2) {\n      return dt1 - dt2;\n    },\n    numberAsString: function (n1, n2) {\n      return parseFloat(n1) - parseFloat(n2);\n    }\n  };\n  jsGrid.sortStrategies = sortStrategies;\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n  function Validation(config) {\n    this._init(config);\n  }\n\n  Validation.prototype = {\n    _init: function (config) {\n      $.extend(true, this, config);\n    },\n    validate: function (args) {\n      var errors = [];\n      $.each(this._normalizeRules(args.rules), function (_, rule) {\n        if (rule.validator(args.value, args.item, rule.param)) return;\n        var errorMessage = $.isFunction(rule.message) ? rule.message(args.value, args.item) : rule.message;\n        errors.push(errorMessage);\n      });\n      return errors;\n    },\n    _normalizeRules: function (rules) {\n      if (!$.isArray(rules)) rules = [rules];\n      return $.map(rules, $.proxy(function (rule) {\n        return this._normalizeRule(rule);\n      }, this));\n    },\n    _normalizeRule: function (rule) {\n      if (typeof rule === \"string\") rule = {\n        validator: rule\n      };\n      if ($.isFunction(rule)) rule = {\n        validator: rule\n      };\n      if ($.isPlainObject(rule)) rule = $.extend({}, rule);else throw Error(\"wrong validation config specified\");\n      if ($.isFunction(rule.validator)) return rule;\n      return this._applyNamedValidator(rule, rule.validator);\n    },\n    _applyNamedValidator: function (rule, validatorName) {\n      delete rule.validator;\n      var validator = validators[validatorName];\n      if (!validator) throw Error(\"unknown validator \\\"\" + validatorName + \"\\\"\");\n\n      if ($.isFunction(validator)) {\n        validator = {\n          validator: validator\n        };\n      }\n\n      return $.extend({}, validator, rule);\n    }\n  };\n  jsGrid.Validation = Validation;\n  var validators = {\n    required: {\n      message: \"Field is required\",\n      validator: function (value) {\n        return value !== undefined && value !== null && value !== \"\";\n      }\n    },\n    rangeLength: {\n      message: \"Field value length is out of the defined range\",\n      validator: function (value, _, param) {\n        return value.length >= param[0] && value.length <= param[1];\n      }\n    },\n    minLength: {\n      message: \"Field value is too short\",\n      validator: function (value, _, param) {\n        return value.length >= param;\n      }\n    },\n    maxLength: {\n      message: \"Field value is too long\",\n      validator: function (value, _, param) {\n        return value.length <= param;\n      }\n    },\n    pattern: {\n      message: \"Field value is not matching the defined pattern\",\n      validator: function (value, _, param) {\n        if (typeof param === \"string\") {\n          param = new RegExp(\"^(?:\" + param + \")$\");\n        }\n\n        return param.test(value);\n      }\n    },\n    range: {\n      message: \"Field value is out of the defined range\",\n      validator: function (value, _, param) {\n        return value >= param[0] && value <= param[1];\n      }\n    },\n    min: {\n      message: \"Field value is too small\",\n      validator: function (value, _, param) {\n        return value >= param;\n      }\n    },\n    max: {\n      message: \"Field value is too large\",\n      validator: function (value, _, param) {\n        return value <= param;\n      }\n    }\n  };\n  jsGrid.validators = validators;\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n  function Field(config) {\n    $.extend(true, this, config);\n    this.sortingFunc = this._getSortingFunc();\n  }\n\n  Field.prototype = {\n    name: \"\",\n    title: null,\n    css: \"\",\n    align: \"\",\n    width: 100,\n    visible: true,\n    filtering: true,\n    inserting: true,\n    editing: true,\n    sorting: true,\n    sorter: \"string\",\n    // name of SortStrategy or function to compare elements\n    headerTemplate: function () {\n      return this.title === undefined || this.title === null ? this.name : this.title;\n    },\n    itemTemplate: function (value, item) {\n      return value;\n    },\n    filterTemplate: function () {\n      return \"\";\n    },\n    insertTemplate: function () {\n      return \"\";\n    },\n    editTemplate: function (value, item) {\n      this._value = value;\n      return this.itemTemplate(value, item);\n    },\n    filterValue: function () {\n      return \"\";\n    },\n    insertValue: function () {\n      return \"\";\n    },\n    editValue: function () {\n      return this._value;\n    },\n    _getSortingFunc: function () {\n      var sorter = this.sorter;\n\n      if ($.isFunction(sorter)) {\n        return sorter;\n      }\n\n      if (typeof sorter === \"string\") {\n        return jsGrid.sortStrategies[sorter];\n      }\n\n      throw Error(\"wrong sorter for the field \\\"\" + this.name + \"\\\"!\");\n    }\n  };\n  jsGrid.Field = Field;\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n  var Field = jsGrid.Field;\n\n  function TextField(config) {\n    Field.call(this, config);\n  }\n\n  TextField.prototype = new Field({\n    autosearch: true,\n    readOnly: false,\n    filterTemplate: function () {\n      if (!this.filtering) return \"\";\n\n      var grid = this._grid,\n          $result = this.filterControl = this._createTextBox();\n\n      if (this.autosearch) {\n        $result.on(\"keypress\", function (e) {\n          if (e.which === 13) {\n            grid.search();\n            e.preventDefault();\n          }\n        });\n      }\n\n      return $result;\n    },\n    insertTemplate: function () {\n      if (!this.inserting) return \"\";\n      return this.insertControl = this._createTextBox();\n    },\n    editTemplate: function (value) {\n      if (!this.editing) return this.itemTemplate.apply(this, arguments);\n\n      var $result = this.editControl = this._createTextBox();\n\n      $result.val(value);\n      return $result;\n    },\n    filterValue: function () {\n      return this.filterControl.val();\n    },\n    insertValue: function () {\n      return this.insertControl.val();\n    },\n    editValue: function () {\n      return this.editControl.val();\n    },\n    _createTextBox: function () {\n      return $(\"<input>\").attr(\"type\", \"text\").prop(\"readonly\", !!this.readOnly);\n    }\n  });\n  jsGrid.fields.text = jsGrid.TextField = TextField;\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n  var TextField = jsGrid.TextField;\n\n  function NumberField(config) {\n    TextField.call(this, config);\n  }\n\n  NumberField.prototype = new TextField({\n    sorter: \"number\",\n    align: \"right\",\n    readOnly: false,\n    filterValue: function () {\n      return this.filterControl.val() ? parseInt(this.filterControl.val() || 0, 10) : undefined;\n    },\n    insertValue: function () {\n      return this.insertControl.val() ? parseInt(this.insertControl.val() || 0, 10) : undefined;\n    },\n    editValue: function () {\n      return this.editControl.val() ? parseInt(this.editControl.val() || 0, 10) : undefined;\n    },\n    _createTextBox: function () {\n      return $(\"<input>\").attr(\"type\", \"number\").prop(\"readonly\", !!this.readOnly);\n    }\n  });\n  jsGrid.fields.number = jsGrid.NumberField = NumberField;\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n  var TextField = jsGrid.TextField;\n\n  function TextAreaField(config) {\n    TextField.call(this, config);\n  }\n\n  TextAreaField.prototype = new TextField({\n    insertTemplate: function () {\n      if (!this.inserting) return \"\";\n      return this.insertControl = this._createTextArea();\n    },\n    editTemplate: function (value) {\n      if (!this.editing) return this.itemTemplate.apply(this, arguments);\n\n      var $result = this.editControl = this._createTextArea();\n\n      $result.val(value);\n      return $result;\n    },\n    _createTextArea: function () {\n      return $(\"<textarea>\").prop(\"readonly\", !!this.readOnly);\n    }\n  });\n  jsGrid.fields.textarea = jsGrid.TextAreaField = TextAreaField;\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n  var NumberField = jsGrid.NumberField;\n  var numberValueType = \"number\";\n  var stringValueType = \"string\";\n\n  function SelectField(config) {\n    this.items = [];\n    this.selectedIndex = -1;\n    this.valueField = \"\";\n    this.textField = \"\";\n\n    if (config.valueField && config.items.length) {\n      var firstItemValue = config.items[0][config.valueField];\n      this.valueType = typeof firstItemValue === numberValueType ? numberValueType : stringValueType;\n    }\n\n    this.sorter = this.valueType;\n    NumberField.call(this, config);\n  }\n\n  SelectField.prototype = new NumberField({\n    align: \"center\",\n    valueType: numberValueType,\n    itemTemplate: function (value) {\n      var items = this.items,\n          valueField = this.valueField,\n          textField = this.textField,\n          resultItem;\n\n      if (valueField) {\n        resultItem = $.grep(items, function (item, index) {\n          return item[valueField] === value;\n        })[0] || {};\n      } else {\n        resultItem = items[value];\n      }\n\n      var result = textField ? resultItem[textField] : resultItem;\n      return result === undefined || result === null ? \"\" : result;\n    },\n    filterTemplate: function () {\n      if (!this.filtering) return \"\";\n\n      var grid = this._grid,\n          $result = this.filterControl = this._createSelect();\n\n      if (this.autosearch) {\n        $result.on(\"change\", function (e) {\n          grid.search();\n        });\n      }\n\n      return $result;\n    },\n    insertTemplate: function () {\n      if (!this.inserting) return \"\";\n      return this.insertControl = this._createSelect();\n    },\n    editTemplate: function (value) {\n      if (!this.editing) return this.itemTemplate.apply(this, arguments);\n\n      var $result = this.editControl = this._createSelect();\n\n      value !== undefined && $result.val(value);\n      return $result;\n    },\n    filterValue: function () {\n      var val = this.filterControl.val();\n      return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n    },\n    insertValue: function () {\n      var val = this.insertControl.val();\n      return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n    },\n    editValue: function () {\n      var val = this.editControl.val();\n      return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n    },\n    _createSelect: function () {\n      var $result = $(\"<select>\"),\n          valueField = this.valueField,\n          textField = this.textField,\n          selectedIndex = this.selectedIndex;\n      $.each(this.items, function (index, item) {\n        var value = valueField ? item[valueField] : index,\n            text = textField ? item[textField] : item;\n        var $option = $(\"<option>\").attr(\"value\", value).text(text).appendTo($result);\n        $option.prop(\"selected\", selectedIndex === index);\n      });\n      $result.prop(\"disabled\", !!this.readOnly);\n      return $result;\n    }\n  });\n  jsGrid.fields.select = jsGrid.SelectField = SelectField;\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n  var Field = jsGrid.Field;\n\n  function CheckboxField(config) {\n    Field.call(this, config);\n  }\n\n  CheckboxField.prototype = new Field({\n    sorter: \"number\",\n    align: \"center\",\n    autosearch: true,\n    itemTemplate: function (value) {\n      return this._createCheckbox().prop({\n        checked: value,\n        disabled: true\n      });\n    },\n    filterTemplate: function () {\n      if (!this.filtering) return \"\";\n\n      var grid = this._grid,\n          $result = this.filterControl = this._createCheckbox();\n\n      $result.prop({\n        readOnly: true,\n        indeterminate: true\n      });\n      $result.on(\"click\", function () {\n        var $cb = $(this);\n\n        if ($cb.prop(\"readOnly\")) {\n          $cb.prop({\n            checked: false,\n            readOnly: false\n          });\n        } else if (!$cb.prop(\"checked\")) {\n          $cb.prop({\n            readOnly: true,\n            indeterminate: true\n          });\n        }\n      });\n\n      if (this.autosearch) {\n        $result.on(\"click\", function () {\n          grid.search();\n        });\n      }\n\n      return $result;\n    },\n    insertTemplate: function () {\n      if (!this.inserting) return \"\";\n      return this.insertControl = this._createCheckbox();\n    },\n    editTemplate: function (value) {\n      if (!this.editing) return this.itemTemplate.apply(this, arguments);\n\n      var $result = this.editControl = this._createCheckbox();\n\n      $result.prop(\"checked\", value);\n      return $result;\n    },\n    filterValue: function () {\n      return this.filterControl.get(0).indeterminate ? undefined : this.filterControl.is(\":checked\");\n    },\n    insertValue: function () {\n      return this.insertControl.is(\":checked\");\n    },\n    editValue: function () {\n      return this.editControl.is(\":checked\");\n    },\n    _createCheckbox: function () {\n      return $(\"<input>\").attr(\"type\", \"checkbox\");\n    }\n  });\n  jsGrid.fields.checkbox = jsGrid.CheckboxField = CheckboxField;\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n  var Field = jsGrid.Field;\n\n  function ControlField(config) {\n    Field.call(this, config);\n    this._configInitialized = false;\n  }\n\n  ControlField.prototype = new Field({\n    css: \"jsgrid-control-field\",\n    align: \"center\",\n    width: 50,\n    filtering: false,\n    inserting: false,\n    editing: false,\n    sorting: false,\n    buttonClass: \"jsgrid-button\",\n    modeButtonClass: \"jsgrid-mode-button\",\n    modeOnButtonClass: \"jsgrid-mode-on-button\",\n    searchModeButtonClass: \"jsgrid-search-mode-button\",\n    insertModeButtonClass: \"jsgrid-insert-mode-button\",\n    editButtonClass: \"jsgrid-edit-button\",\n    deleteButtonClass: \"jsgrid-delete-button\",\n    searchButtonClass: \"jsgrid-search-button\",\n    clearFilterButtonClass: \"jsgrid-clear-filter-button\",\n    insertButtonClass: \"jsgrid-insert-button\",\n    updateButtonClass: \"jsgrid-update-button\",\n    cancelEditButtonClass: \"jsgrid-cancel-edit-button\",\n    searchModeButtonTooltip: \"Switch to searching\",\n    insertModeButtonTooltip: \"Switch to inserting\",\n    editButtonTooltip: \"Edit\",\n    deleteButtonTooltip: \"Delete\",\n    searchButtonTooltip: \"Search\",\n    clearFilterButtonTooltip: \"Clear filter\",\n    insertButtonTooltip: \"Insert\",\n    updateButtonTooltip: \"Update\",\n    cancelEditButtonTooltip: \"Cancel edit\",\n    editButton: true,\n    deleteButton: true,\n    clearFilterButton: true,\n    modeSwitchButton: true,\n    _initConfig: function () {\n      this._hasFiltering = this._grid.filtering;\n      this._hasInserting = this._grid.inserting;\n\n      if (this._hasInserting && this.modeSwitchButton) {\n        this._grid.inserting = false;\n      }\n\n      this._configInitialized = true;\n    },\n    headerTemplate: function () {\n      if (!this._configInitialized) {\n        this._initConfig();\n      }\n\n      var hasFiltering = this._hasFiltering;\n      var hasInserting = this._hasInserting;\n      if (!this.modeSwitchButton || !hasFiltering && !hasInserting) return \"\";\n      if (hasFiltering && !hasInserting) return this._createFilterSwitchButton();\n      if (hasInserting && !hasFiltering) return this._createInsertSwitchButton();\n      return this._createModeSwitchButton();\n    },\n    itemTemplate: function (value, item) {\n      var $result = $([]);\n\n      if (this.editButton) {\n        $result = $result.add(this._createEditButton(item));\n      }\n\n      if (this.deleteButton) {\n        $result = $result.add(this._createDeleteButton(item));\n      }\n\n      return $result;\n    },\n    filterTemplate: function () {\n      var $result = this._createSearchButton();\n\n      return this.clearFilterButton ? $result.add(this._createClearFilterButton()) : $result;\n    },\n    insertTemplate: function () {\n      return this._createInsertButton();\n    },\n    editTemplate: function () {\n      return this._createUpdateButton().add(this._createCancelEditButton());\n    },\n    _createFilterSwitchButton: function () {\n      return this._createOnOffSwitchButton(\"filtering\", this.searchModeButtonClass, true);\n    },\n    _createInsertSwitchButton: function () {\n      return this._createOnOffSwitchButton(\"inserting\", this.insertModeButtonClass, false);\n    },\n    _createOnOffSwitchButton: function (option, cssClass, isOnInitially) {\n      var isOn = isOnInitially;\n      var updateButtonState = $.proxy(function () {\n        $button.toggleClass(this.modeOnButtonClass, isOn);\n      }, this);\n\n      var $button = this._createGridButton(this.modeButtonClass + \" \" + cssClass, \"\", function (grid) {\n        isOn = !isOn;\n        grid.option(option, isOn);\n        updateButtonState();\n      });\n\n      updateButtonState();\n      return $button;\n    },\n    _createModeSwitchButton: function () {\n      var isInserting = false;\n      var updateButtonState = $.proxy(function () {\n        $button.attr(\"title\", isInserting ? this.searchModeButtonTooltip : this.insertModeButtonTooltip).toggleClass(this.insertModeButtonClass, !isInserting).toggleClass(this.searchModeButtonClass, isInserting);\n      }, this);\n\n      var $button = this._createGridButton(this.modeButtonClass, \"\", function (grid) {\n        isInserting = !isInserting;\n        grid.option(\"inserting\", isInserting);\n        grid.option(\"filtering\", !isInserting);\n        updateButtonState();\n      });\n\n      updateButtonState();\n      return $button;\n    },\n    _createEditButton: function (item) {\n      return this._createGridButton(this.editButtonClass, this.editButtonTooltip, function (grid, e) {\n        grid.editItem(item);\n        e.stopPropagation();\n      });\n    },\n    _createDeleteButton: function (item) {\n      return this._createGridButton(this.deleteButtonClass, this.deleteButtonTooltip, function (grid, e) {\n        grid.deleteItem(item);\n        e.stopPropagation();\n      });\n    },\n    _createSearchButton: function () {\n      return this._createGridButton(this.searchButtonClass, this.searchButtonTooltip, function (grid) {\n        grid.search();\n      });\n    },\n    _createClearFilterButton: function () {\n      return this._createGridButton(this.clearFilterButtonClass, this.clearFilterButtonTooltip, function (grid) {\n        grid.clearFilter();\n      });\n    },\n    _createInsertButton: function () {\n      return this._createGridButton(this.insertButtonClass, this.insertButtonTooltip, function (grid) {\n        grid.insertItem().done(function () {\n          grid.clearInsert();\n        });\n      });\n    },\n    _createUpdateButton: function () {\n      return this._createGridButton(this.updateButtonClass, this.updateButtonTooltip, function (grid, e) {\n        grid.updateItem();\n        e.stopPropagation();\n      });\n    },\n    _createCancelEditButton: function () {\n      return this._createGridButton(this.cancelEditButtonClass, this.cancelEditButtonTooltip, function (grid, e) {\n        grid.cancelEdit();\n        e.stopPropagation();\n      });\n    },\n    _createGridButton: function (cls, tooltip, clickHandler) {\n      var grid = this._grid;\n      return $(\"<input>\").addClass(this.buttonClass).addClass(cls).attr({\n        type: \"button\",\n        title: tooltip\n      }).on(\"click\", function (e) {\n        clickHandler(grid, e);\n      });\n    },\n    editValue: function () {\n      return \"\";\n    }\n  });\n  jsGrid.fields.control = jsGrid.ControlField = ControlField;\n})(jsGrid, jQuery);","map":{"version":3,"sources":["C:/Users/srouco/Downloads/Personal/htdocs/aaludica.com.ar/web/node_modules/jsgrid/dist/jsgrid.js"],"names":["window","$","undefined","JSGRID","JSGRID_DATA_KEY","JSGRID_ROW_DATA_KEY","JSGRID_EDIT_ROW_DATA_KEY","SORT_ORDER_ASC","SORT_ORDER_DESC","FIRST_PAGE_PLACEHOLDER","PAGES_PLACEHOLDER","PREV_PAGE_PLACEHOLDER","NEXT_PAGE_PLACEHOLDER","LAST_PAGE_PLACEHOLDER","PAGE_INDEX_PLACEHOLDER","PAGE_COUNT_PLACEHOLDER","ITEM_COUNT_PLACEHOLDER","EMPTY_HREF","getOrApply","value","context","isFunction","apply","makeArray","arguments","slice","normalizePromise","promise","d","Deferred","then","resolve","reject","defaultController","loadData","noop","insertItem","updateItem","deleteItem","Grid","element","config","$element","data","_container","fields","_editingRow","_sortField","_sortOrder","_firstDisplayingPage","_init","render","prototype","width","height","updateOnResize","rowClass","rowRenderer","rowClick","args","editing","editItem","event","target","closest","rowDoubleClick","noDataContent","noDataRowClass","heading","headerRowRenderer","headerRowClass","headerCellClass","filtering","filterRowRenderer","filterRowClass","inserting","insertRowRenderer","insertRowClass","editRowRenderer","editRowClass","confirmDeleting","deleteConfirm","selecting","selectedRowClass","oddRowClass","evenRowClass","cellClass","sorting","sortableClass","sortAscClass","sortDescClass","paging","pagerContainer","pageIndex","pageSize","pageButtonCount","pagerFormat","pagePrevText","pageNextText","pageFirstText","pageLastText","pageNavigatorNextText","pageNavigatorPrevText","pagerContainerClass","pagerClass","pagerNavButtonClass","pagerNavButtonInactiveClass","pageClass","currentPageClass","customLoading","pageLoading","autoload","controller","loadIndication","loadIndicationDelay","loadMessage","loadShading","invalidMessage","invalidNotify","messages","map","errors","error","message","alert","concat","join","onInit","onRefreshing","onRefreshed","onPageChanged","onItemDeleting","onItemDeleted","onItemInserting","onItemInserted","onItemEditing","onItemUpdating","onItemUpdated","onItemInvalid","onDataLoading","onDataLoaded","onOptionChanging","onOptionChanged","onError","invalidClass","containerClass","tableClass","gridHeaderClass","gridBodyClass","extend","_initLoadStrategy","_initController","_initFields","_attachWindowLoadResize","_attachWindowResizeCallback","_callEventHandler","loadStrategy","jsGrid","loadStrategies","PageLoadingStrategy","DirectLoadingStrategy","_loadStrategy","_controller","renderTemplate","source","key","push","unshift","loadIndicator","LoadIndicator","validation","Validation","self","field","isPlainObject","fieldConstructor","type","Field","_grid","on","proxy","_refreshSize","_detachWindowResizeCallback","off","option","optionChangingEventArgs","optionChangedEventArgs","length","oldValue","newValue","_handleOptionChange","fieldOption","_normalizeField","_renderGrid","name","_refreshContent","_refreshPager","refresh","search","openPage","cancelEdit","destroy","_clear","removeData","addClass","css","append","_createHeader","_createBody","_pagerContainer","_createPagerContainer","_loadIndicator","_createLoadIndicator","_validation","_createValidation","shading","container","clearTimeout","_loadingTimer","empty","position","$headerRow","_headerRow","_createHeaderRow","$filterRow","_filterRow","_createFilterRow","$insertRow","_insertRow","_createInsertRow","$headerGrid","_headerGrid","$header","_header","_scrollBarWidth","$content","_content","$bodyGrid","_bodyGrid","$body","_body","e","scrollLeft","appendTo","_eachField","callBack","each","index","visible","call","$result","$th","_prepareCell","headerTemplate","sort","cell","cssprop","align","filterTemplate","insertTemplate","handler","eventParams","grid","reset","_resetSorting","_resetPager","_setPage","_clearSortingCss","_refreshHeading","_refreshFiltering","_refreshInserting","toggle","_createNoDataRow","indexFrom","firstDisplayIndex","indexTo","lastDisplayIndex","itemIndex","item","_createRow","amountOfFields","attr","_renderCells","_getRowClasses","_attachRowHover","classes","$row","hover","removeClass","_createCell","fieldValue","_getItemFieldValue","cellRenderer","itemTemplate","props","split","result","shift","_setItemFieldValue","current","prop","order","_setSortingParams","_setSortingCss","find","_reversedSortOrder","isNumeric","grep","f","fieldIndex","_visibleFieldIndex","eq","inArray","_sortData","sortFactor","_sortFactor","sortField","item1","item2","sortingFunc","_itemsCount","itemsCount","_pagesCount","Math","floor","$pagerContainer","_createPager","showPager","pagerRenderer","pageCount","_createPagerByFormat","itemCount","pagerParts","pagerPart","_createPages","_createPagerNavButton","isArray","firstDisplayingPage","pages","_createPagerPageNavButton","showPrevPages","i","pageNumber","_createPagerCurrentPage","_createPagerPage","showNextPages","text","isActive","_createPagerButton","$link","html","_refreshHeight","_refreshWidth","_getAutoWidth","contentWidth","outerWidth","borderWidth","innerWidth","$ghostContainer","$ghostContent","widthExcludingScrollBar","remove","nonBodyHeight","outerHeight","parents","_controllerCall","method","param","isCanceled","doneCallback","_showLoading","Error","done","fail","_errorHandler","always","_hideLoading","setTimeout","show","hide","filter","getFilter","loadParams","_sortingParams","cancel","loadedData","finishLoad","filterValue","sortOrder","getSorting","sortingParams","clearFilter","replaceWith","insertingItem","_getValidatedInsertItem","insertedItem","finishInsert","_getInsertItem","_validateItem","insertValue","validationErrors","_rowIndex","row","validate","_getEditRow","rules","_setCellValidity","children","invalidArgs","$cell","toggleClass","clearInsert","insertRow","rowByItem","_editRow","jquery","nodeType","_itemIndex","$editRow","_createEditRow","insertBefore","editTemplate","editedItem","_getValidatedEditedItem","_updateRow","_getEditedItem","$updatingRow","updatingItem","updatingItemIndex","updatedItem","previousItem","loadedUpdatedItem","$updatedRow","_finishUpdate","updatedItemIndex","editValue","confirm","_deleteRow","deletingItem","deletingItemIndex","finishDelete","fn","methodArgs","instance","methodResult","setDefaults","componentPrototype","locales","locale","lang","localeConfig","setLocale","obj","toUpperCase","hasOwnProperty","version","jQuery","zIndex","shaderClass","loadPanelClass","_initContainer","_initShader","_initLoadPanel","_shader","top","right","bottom","left","_loadPanel","$loadPanel","actualWidth","actualHeight","marginTop","marginLeft","min","deletedItem","deletedItemIndex","splice","isDefined","val","sortStrategies","string","str1","str2","localeCompare","number","n1","n2","date","dt1","dt2","numberAsString","parseFloat","_normalizeRules","_","rule","validator","errorMessage","_normalizeRule","_applyNamedValidator","validatorName","validators","required","rangeLength","minLength","maxLength","pattern","RegExp","test","range","max","_getSortingFunc","title","sorter","_value","TextField","autosearch","readOnly","filterControl","_createTextBox","which","preventDefault","insertControl","editControl","NumberField","parseInt","TextAreaField","_createTextArea","textarea","numberValueType","stringValueType","SelectField","items","selectedIndex","valueField","textField","firstItemValue","valueType","resultItem","_createSelect","$option","select","CheckboxField","_createCheckbox","checked","disabled","indeterminate","$cb","get","is","checkbox","ControlField","_configInitialized","buttonClass","modeButtonClass","modeOnButtonClass","searchModeButtonClass","insertModeButtonClass","editButtonClass","deleteButtonClass","searchButtonClass","clearFilterButtonClass","insertButtonClass","updateButtonClass","cancelEditButtonClass","searchModeButtonTooltip","insertModeButtonTooltip","editButtonTooltip","deleteButtonTooltip","searchButtonTooltip","clearFilterButtonTooltip","insertButtonTooltip","updateButtonTooltip","cancelEditButtonTooltip","editButton","deleteButton","clearFilterButton","modeSwitchButton","_initConfig","_hasFiltering","_hasInserting","hasFiltering","hasInserting","_createFilterSwitchButton","_createInsertSwitchButton","_createModeSwitchButton","add","_createEditButton","_createDeleteButton","_createSearchButton","_createClearFilterButton","_createInsertButton","_createUpdateButton","_createCancelEditButton","_createOnOffSwitchButton","cssClass","isOnInitially","isOn","updateButtonState","$button","_createGridButton","isInserting","stopPropagation","cls","tooltip","clickHandler","control"],"mappings":"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","sourcesContent":["/*\n * jsGrid v1.5.3 (http://js-grid.com)\n * (c) 2016 Artem Tabalin\n * Licensed under MIT (https://github.com/tabalinas/jsgrid/blob/master/LICENSE)\n */\n\n(function(window, $, undefined) {\n\n    var JSGRID = \"JSGrid\",\n        JSGRID_DATA_KEY = JSGRID,\n        JSGRID_ROW_DATA_KEY = \"JSGridItem\",\n        JSGRID_EDIT_ROW_DATA_KEY = \"JSGridEditRow\",\n\n        SORT_ORDER_ASC = \"asc\",\n        SORT_ORDER_DESC = \"desc\",\n\n        FIRST_PAGE_PLACEHOLDER = \"{first}\",\n        PAGES_PLACEHOLDER = \"{pages}\",\n        PREV_PAGE_PLACEHOLDER = \"{prev}\",\n        NEXT_PAGE_PLACEHOLDER = \"{next}\",\n        LAST_PAGE_PLACEHOLDER = \"{last}\",\n        PAGE_INDEX_PLACEHOLDER = \"{pageIndex}\",\n        PAGE_COUNT_PLACEHOLDER = \"{pageCount}\",\n        ITEM_COUNT_PLACEHOLDER = \"{itemCount}\",\n\n        EMPTY_HREF = \"javascript:void(0);\";\n\n    var getOrApply = function(value, context) {\n        if($.isFunction(value)) {\n            return value.apply(context, $.makeArray(arguments).slice(2));\n        }\n        return value;\n    };\n\n    var normalizePromise = function(promise) {\n        var d = $.Deferred();\n\n        if(promise && promise.then) {\n            promise.then(function() {\n                d.resolve.apply(d, arguments);\n            }, function() {\n                d.reject.apply(d, arguments);\n            });\n        } else {\n            d.resolve(promise);\n        }\n\n        return d.promise();\n    };\n\n    var defaultController = {\n        loadData: $.noop,\n        insertItem: $.noop,\n        updateItem: $.noop,\n        deleteItem: $.noop\n    };\n\n\n    function Grid(element, config) {\n        var $element = $(element);\n\n        $element.data(JSGRID_DATA_KEY, this);\n\n        this._container = $element;\n\n        this.data = [];\n        this.fields = [];\n\n        this._editingRow = null;\n        this._sortField = null;\n        this._sortOrder = SORT_ORDER_ASC;\n        this._firstDisplayingPage = 1;\n\n        this._init(config);\n        this.render();\n    }\n\n    Grid.prototype = {\n        width: \"auto\",\n        height: \"auto\",\n        updateOnResize: true,\n\n        rowClass: $.noop,\n        rowRenderer: null,\n\n        rowClick: function(args) {\n            if(this.editing) {\n                this.editItem($(args.event.target).closest(\"tr\"));\n            }\n        },\n        rowDoubleClick: $.noop,\n\n        noDataContent: \"Not found\",\n        noDataRowClass: \"jsgrid-nodata-row\",\n\n        heading: true,\n        headerRowRenderer: null,\n        headerRowClass: \"jsgrid-header-row\",\n        headerCellClass: \"jsgrid-header-cell\",\n\n        filtering: false,\n        filterRowRenderer: null,\n        filterRowClass: \"jsgrid-filter-row\",\n\n        inserting: false,\n        insertRowRenderer: null,\n        insertRowClass: \"jsgrid-insert-row\",\n\n        editing: false,\n        editRowRenderer: null,\n        editRowClass: \"jsgrid-edit-row\",\n\n        confirmDeleting: true,\n        deleteConfirm: \"Are you sure?\",\n\n        selecting: true,\n        selectedRowClass: \"jsgrid-selected-row\",\n        oddRowClass: \"jsgrid-row\",\n        evenRowClass: \"jsgrid-alt-row\",\n        cellClass: \"jsgrid-cell\",\n\n        sorting: false,\n        sortableClass: \"jsgrid-header-sortable\",\n        sortAscClass: \"jsgrid-header-sort jsgrid-header-sort-asc\",\n        sortDescClass: \"jsgrid-header-sort jsgrid-header-sort-desc\",\n\n        paging: false,\n        pagerContainer: null,\n        pageIndex: 1,\n        pageSize: 20,\n        pageButtonCount: 15,\n        pagerFormat: \"Pages: {first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} of {pageCount}\",\n        pagePrevText: \"Prev\",\n        pageNextText: \"Next\",\n        pageFirstText: \"First\",\n        pageLastText: \"Last\",\n        pageNavigatorNextText: \"...\",\n        pageNavigatorPrevText: \"...\",\n        pagerContainerClass: \"jsgrid-pager-container\",\n        pagerClass: \"jsgrid-pager\",\n        pagerNavButtonClass: \"jsgrid-pager-nav-button\",\n        pagerNavButtonInactiveClass: \"jsgrid-pager-nav-inactive-button\",\n        pageClass: \"jsgrid-pager-page\",\n        currentPageClass: \"jsgrid-pager-current-page\",\n\n        customLoading: false,\n        pageLoading: false,\n\n        autoload: false,\n        controller: defaultController,\n\n        loadIndication: true,\n        loadIndicationDelay: 500,\n        loadMessage: \"Please, wait...\",\n        loadShading: true,\n\n        invalidMessage: \"Invalid data entered!\",\n\n        invalidNotify: function(args) {\n            var messages = $.map(args.errors, function(error) {\n                return error.message || null;\n            });\n\n            window.alert([this.invalidMessage].concat(messages).join(\"\\n\"));\n        },\n\n        onInit: $.noop,\n        onRefreshing: $.noop,\n        onRefreshed: $.noop,\n        onPageChanged: $.noop,\n        onItemDeleting: $.noop,\n        onItemDeleted: $.noop,\n        onItemInserting: $.noop,\n        onItemInserted: $.noop,\n        onItemEditing: $.noop,\n        onItemUpdating: $.noop,\n        onItemUpdated: $.noop,\n        onItemInvalid: $.noop,\n        onDataLoading: $.noop,\n        onDataLoaded: $.noop,\n        onOptionChanging: $.noop,\n        onOptionChanged: $.noop,\n        onError: $.noop,\n\n        invalidClass: \"jsgrid-invalid\",\n\n        containerClass: \"jsgrid\",\n        tableClass: \"jsgrid-table\",\n        gridHeaderClass: \"jsgrid-grid-header\",\n        gridBodyClass: \"jsgrid-grid-body\",\n\n        _init: function(config) {\n            $.extend(this, config);\n            this._initLoadStrategy();\n            this._initController();\n            this._initFields();\n            this._attachWindowLoadResize();\n            this._attachWindowResizeCallback();\n            this._callEventHandler(this.onInit)\n        },\n\n        loadStrategy: function() {\n            return this.pageLoading\n                ? new jsGrid.loadStrategies.PageLoadingStrategy(this)\n                : new jsGrid.loadStrategies.DirectLoadingStrategy(this);\n        },\n\n        _initLoadStrategy: function() {\n            this._loadStrategy = getOrApply(this.loadStrategy, this);\n        },\n\n        _initController: function() {\n            this._controller = $.extend({}, defaultController, getOrApply(this.controller, this));\n        },\n\n        renderTemplate: function(source, context, config) {\n            args = [];\n            for(var key in config) {\n                args.push(config[key]);\n            }\n\n            args.unshift(source, context);\n\n            source = getOrApply.apply(null, args);\n            return (source === undefined || source === null) ? \"\" : source;\n        },\n\n        loadIndicator: function(config) {\n            return new jsGrid.LoadIndicator(config);\n        },\n\n        validation: function(config) {\n            return jsGrid.Validation && new jsGrid.Validation(config);\n        },\n\n        _initFields: function() {\n            var self = this;\n            self.fields = $.map(self.fields, function(field) {\n                if($.isPlainObject(field)) {\n                    var fieldConstructor = (field.type && jsGrid.fields[field.type]) || jsGrid.Field;\n                    field = new fieldConstructor(field);\n                }\n                field._grid = self;\n                return field;\n            });\n        },\n\n        _attachWindowLoadResize: function() {\n            $(window).on(\"load\", $.proxy(this._refreshSize, this));\n        },\n\n        _attachWindowResizeCallback: function() {\n            if(this.updateOnResize) {\n                $(window).on(\"resize\", $.proxy(this._refreshSize, this));\n            }\n        },\n\n        _detachWindowResizeCallback: function() {\n            $(window).off(\"resize\", this._refreshSize);\n        },\n\n        option: function(key, value) {\n            var optionChangingEventArgs,\n                optionChangedEventArgs;\n\n            if(arguments.length === 1)\n                return this[key];\n\n            optionChangingEventArgs = {\n                option: key,\n                oldValue: this[key],\n                newValue: value\n            };\n            this._callEventHandler(this.onOptionChanging, optionChangingEventArgs);\n\n            this._handleOptionChange(optionChangingEventArgs.option, optionChangingEventArgs.newValue);\n\n            optionChangedEventArgs = {\n                option: optionChangingEventArgs.option,\n                value: optionChangingEventArgs.newValue\n            };\n            this._callEventHandler(this.onOptionChanged, optionChangedEventArgs);\n        },\n\n        fieldOption: function(field, key, value) {\n            field = this._normalizeField(field);\n\n            if(arguments.length === 2)\n                return field[key];\n\n            field[key] = value;\n            this._renderGrid();\n        },\n\n        _handleOptionChange: function(name, value) {\n            this[name] = value;\n\n            switch(name) {\n                case \"width\":\n                case \"height\":\n                    this._refreshSize();\n                    break;\n                case \"rowClass\":\n                case \"rowRenderer\":\n                case \"rowClick\":\n                case \"rowDoubleClick\":\n                case \"noDataRowClass\":\n                case \"noDataContent\":\n                case \"selecting\":\n                case \"selectedRowClass\":\n                case \"oddRowClass\":\n                case \"evenRowClass\":\n                    this._refreshContent();\n                    break;\n                case \"pageButtonCount\":\n                case \"pagerFormat\":\n                case \"pagePrevText\":\n                case \"pageNextText\":\n                case \"pageFirstText\":\n                case \"pageLastText\":\n                case \"pageNavigatorNextText\":\n                case \"pageNavigatorPrevText\":\n                case \"pagerClass\":\n                case \"pagerNavButtonClass\":\n                case \"pageClass\":\n                case \"currentPageClass\":\n                case \"pagerRenderer\":\n                    this._refreshPager();\n                    break;\n                case \"fields\":\n                    this._initFields();\n                    this.render();\n                    break;\n                case \"data\":\n                case \"editing\":\n                case \"heading\":\n                case \"filtering\":\n                case \"inserting\":\n                case \"paging\":\n                    this.refresh();\n                    break;\n                case \"loadStrategy\":\n                case \"pageLoading\":\n                    this._initLoadStrategy();\n                    this.search();\n                    break;\n                case \"pageIndex\":\n                    this.openPage(value);\n                    break;\n                case \"pageSize\":\n                    this.refresh();\n                    this.search();\n                    break;\n                case \"editRowRenderer\":\n                case \"editRowClass\":\n                    this.cancelEdit();\n                    break;\n                case \"updateOnResize\":\n                    this._detachWindowResizeCallback();\n                    this._attachWindowResizeCallback();\n                    break;\n                case \"invalidNotify\":\n                case \"invalidMessage\":\n                    break;\n                default:\n                    this.render();\n                    break;\n            }\n        },\n\n        destroy: function() {\n            this._detachWindowResizeCallback();\n            this._clear();\n            this._container.removeData(JSGRID_DATA_KEY);\n        },\n\n        render: function() {\n            this._renderGrid();\n            return this.autoload ? this.loadData() : $.Deferred().resolve().promise();\n        },\n\n        _renderGrid: function() {\n            this._clear();\n\n            this._container.addClass(this.containerClass)\n                .css(\"position\", \"relative\")\n                .append(this._createHeader())\n                .append(this._createBody());\n\n            this._pagerContainer = this._createPagerContainer();\n            this._loadIndicator = this._createLoadIndicator();\n            this._validation = this._createValidation();\n\n            this.refresh();\n        },\n\n        _createLoadIndicator: function() {\n            return getOrApply(this.loadIndicator, this, {\n                message: this.loadMessage,\n                shading: this.loadShading,\n                container: this._container\n            });\n        },\n\n        _createValidation: function() {\n            return getOrApply(this.validation, this);\n        },\n\n        _clear: function() {\n            this.cancelEdit();\n\n            clearTimeout(this._loadingTimer);\n\n            this._pagerContainer && this._pagerContainer.empty();\n\n            this._container.empty()\n                .css({ position: \"\", width: \"\", height: \"\" });\n        },\n\n        _createHeader: function() {\n            var $headerRow = this._headerRow = this._createHeaderRow(),\n                $filterRow = this._filterRow = this._createFilterRow(),\n                $insertRow = this._insertRow = this._createInsertRow();\n\n            var $headerGrid = this._headerGrid = $(\"<table>\").addClass(this.tableClass)\n                .append($headerRow)\n                .append($filterRow)\n                .append($insertRow);\n\n            var $header = this._header = $(\"<div>\").addClass(this.gridHeaderClass)\n                .addClass(this._scrollBarWidth() ? \"jsgrid-header-scrollbar\" : \"\")\n                .append($headerGrid);\n\n            return $header;\n        },\n\n        _createBody: function() {\n            var $content = this._content = $(\"<tbody>\");\n\n            var $bodyGrid = this._bodyGrid = $(\"<table>\").addClass(this.tableClass)\n                .append($content);\n\n            var $body = this._body = $(\"<div>\").addClass(this.gridBodyClass)\n                .append($bodyGrid)\n                .on(\"scroll\", $.proxy(function(e) {\n                    this._header.scrollLeft(e.target.scrollLeft);\n                }, this));\n\n            return $body;\n        },\n\n        _createPagerContainer: function() {\n            var pagerContainer = this.pagerContainer || $(\"<div>\").appendTo(this._container);\n            return $(pagerContainer).addClass(this.pagerContainerClass);\n        },\n\n        _eachField: function(callBack) {\n            var self = this;\n            $.each(this.fields, function(index, field) {\n                if(field.visible) {\n                    callBack.call(self, field, index);\n                }\n            });\n        },\n\n        _createHeaderRow: function() {\n            if($.isFunction(this.headerRowRenderer))\n                return $(this.renderTemplate(this.headerRowRenderer, this));\n\n            var $result = $(\"<tr>\").addClass(this.headerRowClass);\n\n            this._eachField(function(field, index) {\n                var $th = this._prepareCell(\"<th>\", field, \"headercss\", this.headerCellClass)\n                    .append(this.renderTemplate(field.headerTemplate, field))\n                    .appendTo($result);\n\n                if(this.sorting && field.sorting) {\n                    $th.addClass(this.sortableClass)\n                        .on(\"click\", $.proxy(function() {\n                            this.sort(index);\n                        }, this));\n                }\n            });\n\n            return $result;\n        },\n\n        _prepareCell: function(cell, field, cssprop, cellClass) {\n            return $(cell).css(\"width\", field.width)\n                .addClass(cellClass || this.cellClass)\n                .addClass((cssprop && field[cssprop]) || field.css)\n                .addClass(field.align ? (\"jsgrid-align-\" + field.align) : \"\");\n        },\n\n        _createFilterRow: function() {\n            if($.isFunction(this.filterRowRenderer))\n                return $(this.renderTemplate(this.filterRowRenderer, this));\n\n            var $result = $(\"<tr>\").addClass(this.filterRowClass);\n\n            this._eachField(function(field) {\n                this._prepareCell(\"<td>\", field, \"filtercss\")\n                    .append(this.renderTemplate(field.filterTemplate, field))\n                    .appendTo($result);\n            });\n\n            return $result;\n        },\n\n        _createInsertRow: function() {\n            if($.isFunction(this.insertRowRenderer))\n                return $(this.renderTemplate(this.insertRowRenderer, this));\n\n            var $result = $(\"<tr>\").addClass(this.insertRowClass);\n\n            this._eachField(function(field) {\n                this._prepareCell(\"<td>\", field, \"insertcss\")\n                    .append(this.renderTemplate(field.insertTemplate, field))\n                    .appendTo($result);\n            });\n\n            return $result;\n        },\n\n        _callEventHandler: function(handler, eventParams) {\n            handler.call(this, $.extend(eventParams, {\n                grid: this\n            }));\n\n            return eventParams;\n        },\n\n        reset: function() {\n            this._resetSorting();\n            this._resetPager();\n            return this._loadStrategy.reset();\n        },\n\n        _resetPager: function() {\n            this._firstDisplayingPage = 1;\n            this._setPage(1);\n        },\n\n        _resetSorting: function() {\n            this._sortField = null;\n            this._sortOrder = SORT_ORDER_ASC;\n            this._clearSortingCss();\n        },\n\n        refresh: function() {\n            this._callEventHandler(this.onRefreshing);\n\n            this.cancelEdit();\n\n            this._refreshHeading();\n            this._refreshFiltering();\n            this._refreshInserting();\n            this._refreshContent();\n            this._refreshPager();\n            this._refreshSize();\n\n            this._callEventHandler(this.onRefreshed);\n        },\n\n        _refreshHeading: function() {\n            this._headerRow.toggle(this.heading);\n        },\n\n        _refreshFiltering: function() {\n            this._filterRow.toggle(this.filtering);\n        },\n\n        _refreshInserting: function() {\n            this._insertRow.toggle(this.inserting);\n        },\n\n        _refreshContent: function() {\n            var $content = this._content;\n            $content.empty();\n\n            if(!this.data.length) {\n                $content.append(this._createNoDataRow());\n                return this;\n            }\n\n            var indexFrom = this._loadStrategy.firstDisplayIndex();\n            var indexTo = this._loadStrategy.lastDisplayIndex();\n\n            for(var itemIndex = indexFrom; itemIndex < indexTo; itemIndex++) {\n                var item = this.data[itemIndex];\n                $content.append(this._createRow(item, itemIndex));\n            }\n        },\n\n        _createNoDataRow: function() {\n            var amountOfFields = 0;\n            this._eachField(function() {\n                amountOfFields++;\n            });\n\n            return $(\"<tr>\").addClass(this.noDataRowClass)\n                .append($(\"<td>\").addClass(this.cellClass).attr(\"colspan\", amountOfFields)\n                    .append(this.renderTemplate(this.noDataContent, this)));\n        },\n\n        _createRow: function(item, itemIndex) {\n            var $result;\n\n            if($.isFunction(this.rowRenderer)) {\n                $result = this.renderTemplate(this.rowRenderer, this, { item: item, itemIndex: itemIndex });\n            } else {\n                $result = $(\"<tr>\");\n                this._renderCells($result, item);\n            }\n\n            $result.addClass(this._getRowClasses(item, itemIndex))\n                .data(JSGRID_ROW_DATA_KEY, item)\n                .on(\"click\", $.proxy(function(e) {\n                    this.rowClick({\n                        item: item,\n                        itemIndex: itemIndex,\n                        event: e\n                    });\n                }, this))\n                .on(\"dblclick\", $.proxy(function(e) {\n                    this.rowDoubleClick({\n                        item: item,\n                        itemIndex: itemIndex,\n                        event: e\n                    });\n                }, this));\n\n            if(this.selecting) {\n                this._attachRowHover($result);\n            }\n\n            return $result;\n        },\n\n        _getRowClasses: function(item, itemIndex) {\n            var classes = [];\n            classes.push(((itemIndex + 1) % 2) ? this.oddRowClass : this.evenRowClass);\n            classes.push(getOrApply(this.rowClass, this, item, itemIndex));\n            return classes.join(\" \");\n        },\n\n        _attachRowHover: function($row) {\n            var selectedRowClass = this.selectedRowClass;\n            $row.hover(function() {\n                    $(this).addClass(selectedRowClass);\n                },\n                function() {\n                    $(this).removeClass(selectedRowClass);\n                }\n            );\n        },\n\n        _renderCells: function($row, item) {\n            this._eachField(function(field) {\n                $row.append(this._createCell(item, field));\n            });\n            return this;\n        },\n\n        _createCell: function(item, field) {\n            var $result;\n            var fieldValue = this._getItemFieldValue(item, field);\n\n            var args = { value: fieldValue, item : item };\n            if($.isFunction(field.cellRenderer)) {\n                $result = this.renderTemplate(field.cellRenderer, field, args);\n            } else {\n                $result = $(\"<td>\").append(this.renderTemplate(field.itemTemplate || fieldValue, field, args));\n            }\n\n            return this._prepareCell($result, field);\n        },\n\n        _getItemFieldValue: function(item, field) {\n            var props = field.name.split('.');\n            var result = item[props.shift()];\n\n            while(result && props.length) {\n                result = result[props.shift()];\n            }\n\n            return result;\n        },\n\n        _setItemFieldValue: function(item, field, value) {\n            var props = field.name.split('.');\n            var current = item;\n            var prop = props[0];\n\n            while(current && props.length) {\n                item = current;\n                prop = props.shift();\n                current = item[prop];\n            }\n\n            if(!current) {\n                while(props.length) {\n                    item = item[prop] = {};\n                    prop = props.shift();\n                }\n            }\n\n            item[prop] = value;\n        },\n\n        sort: function(field, order) {\n            if($.isPlainObject(field)) {\n                order = field.order;\n                field = field.field;\n            }\n\n            this._clearSortingCss();\n            this._setSortingParams(field, order);\n            this._setSortingCss();\n            return this._loadStrategy.sort();\n        },\n\n        _clearSortingCss: function() {\n            this._headerRow.find(\"th\")\n                .removeClass(this.sortAscClass)\n                .removeClass(this.sortDescClass);\n        },\n\n        _setSortingParams: function(field, order) {\n            field = this._normalizeField(field);\n            order = order || ((this._sortField === field) ? this._reversedSortOrder(this._sortOrder) : SORT_ORDER_ASC);\n\n            this._sortField = field;\n            this._sortOrder = order;\n        },\n\n        _normalizeField: function(field) {\n            if($.isNumeric(field)) {\n                return this.fields[field];\n            }\n\n            if(typeof field === \"string\") {\n                return $.grep(this.fields, function(f) {\n                    return f.name === field;\n                })[0];\n            }\n\n            return field;\n        },\n\n        _reversedSortOrder: function(order) {\n            return (order === SORT_ORDER_ASC ? SORT_ORDER_DESC : SORT_ORDER_ASC);\n        },\n\n        _setSortingCss: function() {\n            var fieldIndex = this._visibleFieldIndex(this._sortField);\n\n            this._headerRow.find(\"th\").eq(fieldIndex)\n                .addClass(this._sortOrder === SORT_ORDER_ASC ? this.sortAscClass : this.sortDescClass);\n        },\n\n        _visibleFieldIndex: function(field) {\n            return $.inArray(field, $.grep(this.fields, function(f) { return f.visible; }));\n        },\n\n        _sortData: function() {\n            var sortFactor = this._sortFactor(),\n                sortField = this._sortField;\n\n            if(sortField) {\n                this.data.sort(function(item1, item2) {\n                    return sortFactor * sortField.sortingFunc(item1[sortField.name], item2[sortField.name]);\n                });\n            }\n        },\n\n        _sortFactor: function() {\n            return this._sortOrder === SORT_ORDER_ASC ? 1 : -1;\n        },\n\n        _itemsCount: function() {\n            return this._loadStrategy.itemsCount();\n        },\n\n        _pagesCount: function() {\n            var itemsCount = this._itemsCount(),\n                pageSize = this.pageSize;\n            return Math.floor(itemsCount / pageSize) + (itemsCount % pageSize ? 1 : 0);\n        },\n\n        _refreshPager: function() {\n            var $pagerContainer = this._pagerContainer;\n            $pagerContainer.empty();\n\n            if(this.paging) {\n                $pagerContainer.append(this._createPager());\n            }\n\n            var showPager = this.paging && this._pagesCount() > 1;\n            $pagerContainer.toggle(showPager);\n        },\n\n        _createPager: function() {\n            var $result;\n\n            if($.isFunction(this.pagerRenderer)) {\n                $result = $(this.pagerRenderer({\n                    pageIndex: this.pageIndex,\n                    pageCount: this._pagesCount()\n                }));\n            } else {\n                $result = $(\"<div>\").append(this._createPagerByFormat());\n            }\n\n            $result.addClass(this.pagerClass);\n\n            return $result;\n        },\n\n        _createPagerByFormat: function() {\n            var pageIndex = this.pageIndex,\n                pageCount = this._pagesCount(),\n                itemCount = this._itemsCount(),\n                pagerParts = this.pagerFormat.split(\" \");\n\n            return $.map(pagerParts, $.proxy(function(pagerPart) {\n                var result = pagerPart;\n\n                if(pagerPart === PAGES_PLACEHOLDER) {\n                    result = this._createPages();\n                } else if(pagerPart === FIRST_PAGE_PLACEHOLDER) {\n                    result = this._createPagerNavButton(this.pageFirstText, 1, pageIndex > 1);\n                } else if(pagerPart === PREV_PAGE_PLACEHOLDER) {\n                    result = this._createPagerNavButton(this.pagePrevText, pageIndex - 1, pageIndex > 1);\n                } else if(pagerPart === NEXT_PAGE_PLACEHOLDER) {\n                    result = this._createPagerNavButton(this.pageNextText, pageIndex + 1, pageIndex < pageCount);\n                } else if(pagerPart === LAST_PAGE_PLACEHOLDER) {\n                    result = this._createPagerNavButton(this.pageLastText, pageCount, pageIndex < pageCount);\n                } else if(pagerPart === PAGE_INDEX_PLACEHOLDER) {\n                    result = pageIndex;\n                } else if(pagerPart === PAGE_COUNT_PLACEHOLDER) {\n                    result = pageCount;\n                } else if(pagerPart === ITEM_COUNT_PLACEHOLDER) {\n                    result = itemCount;\n                }\n\n                return $.isArray(result) ? result.concat([\" \"]) : [result, \" \"];\n            }, this));\n        },\n\n        _createPages: function() {\n            var pageCount = this._pagesCount(),\n                pageButtonCount = this.pageButtonCount,\n                firstDisplayingPage = this._firstDisplayingPage,\n                pages = [];\n\n            if(firstDisplayingPage > 1) {\n                pages.push(this._createPagerPageNavButton(this.pageNavigatorPrevText, this.showPrevPages));\n            }\n\n            for(var i = 0, pageNumber = firstDisplayingPage; i < pageButtonCount && pageNumber <= pageCount; i++, pageNumber++) {\n                pages.push(pageNumber === this.pageIndex\n                    ? this._createPagerCurrentPage()\n                    : this._createPagerPage(pageNumber));\n            }\n\n            if((firstDisplayingPage + pageButtonCount - 1) < pageCount) {\n                pages.push(this._createPagerPageNavButton(this.pageNavigatorNextText, this.showNextPages));\n            }\n\n            return pages;\n        },\n\n        _createPagerNavButton: function(text, pageIndex, isActive) {\n            return this._createPagerButton(text, this.pagerNavButtonClass + (isActive ? \"\" : \" \" + this.pagerNavButtonInactiveClass),\n                isActive ? function() { this.openPage(pageIndex); } : $.noop);\n        },\n\n        _createPagerPageNavButton: function(text, handler) {\n            return this._createPagerButton(text, this.pagerNavButtonClass, handler);\n        },\n\n        _createPagerPage: function(pageIndex) {\n            return this._createPagerButton(pageIndex, this.pageClass, function() {\n                this.openPage(pageIndex);\n            });\n        },\n\n        _createPagerButton: function(text, css, handler) {\n            var $link = $(\"<a>\").attr(\"href\", EMPTY_HREF)\n                .html(text)\n                .on(\"click\", $.proxy(handler, this));\n\n            return $(\"<span>\").addClass(css).append($link);\n        },\n\n        _createPagerCurrentPage: function() {\n            return $(\"<span>\")\n                .addClass(this.pageClass)\n                .addClass(this.currentPageClass)\n                .text(this.pageIndex);\n        },\n\n        _refreshSize: function() {\n            this._refreshHeight();\n            this._refreshWidth();\n        },\n\n        _refreshWidth: function() {\n            var width = (this.width === \"auto\") ? this._getAutoWidth() : this.width;\n\n            this._container.width(width);\n        },\n\n        _getAutoWidth: function() {\n            var $headerGrid = this._headerGrid,\n                $header = this._header;\n\n            $headerGrid.width(\"auto\");\n\n            var contentWidth = $headerGrid.outerWidth();\n            var borderWidth = $header.outerWidth() - $header.innerWidth();\n\n            $headerGrid.width(\"\");\n\n            return contentWidth + borderWidth;\n        },\n\n        _scrollBarWidth: (function() {\n            var result;\n\n            return function() {\n                if(result === undefined) {\n                    var $ghostContainer = $(\"<div style='width:50px;height:50px;overflow:hidden;position:absolute;top:-10000px;left:-10000px;'></div>\");\n                    var $ghostContent = $(\"<div style='height:100px;'></div>\");\n                    $ghostContainer.append($ghostContent).appendTo(\"body\");\n                    var width = $ghostContent.innerWidth();\n                    $ghostContainer.css(\"overflow-y\", \"auto\");\n                    var widthExcludingScrollBar = $ghostContent.innerWidth();\n                    $ghostContainer.remove();\n                    result = width - widthExcludingScrollBar;\n                }\n                return result;\n            };\n        })(),\n\n        _refreshHeight: function() {\n            var container = this._container,\n                pagerContainer = this._pagerContainer,\n                height = this.height,\n                nonBodyHeight;\n\n            container.height(height);\n\n            if(height !== \"auto\") {\n                height = container.height();\n\n                nonBodyHeight = this._header.outerHeight(true);\n                if(pagerContainer.parents(container).length) {\n                    nonBodyHeight += pagerContainer.outerHeight(true);\n                }\n\n                this._body.outerHeight(height - nonBodyHeight);\n            }\n        },\n\n        showPrevPages: function() {\n            var firstDisplayingPage = this._firstDisplayingPage,\n                pageButtonCount = this.pageButtonCount;\n\n            this._firstDisplayingPage = (firstDisplayingPage > pageButtonCount) ? firstDisplayingPage - pageButtonCount : 1;\n\n            this._refreshPager();\n        },\n\n        showNextPages: function() {\n            var firstDisplayingPage = this._firstDisplayingPage,\n                pageButtonCount = this.pageButtonCount,\n                pageCount = this._pagesCount();\n\n            this._firstDisplayingPage = (firstDisplayingPage + 2 * pageButtonCount > pageCount)\n                ? pageCount - pageButtonCount + 1\n                : firstDisplayingPage + pageButtonCount;\n\n            this._refreshPager();\n        },\n\n        openPage: function(pageIndex) {\n            if(pageIndex < 1 || pageIndex > this._pagesCount())\n                return;\n\n            this._setPage(pageIndex);\n            this._loadStrategy.openPage(pageIndex);\n        },\n\n        _setPage: function(pageIndex) {\n            var firstDisplayingPage = this._firstDisplayingPage,\n                pageButtonCount = this.pageButtonCount;\n\n            this.pageIndex = pageIndex;\n\n            if(pageIndex < firstDisplayingPage) {\n                this._firstDisplayingPage = pageIndex;\n            }\n\n            if(pageIndex > firstDisplayingPage + pageButtonCount - 1) {\n                this._firstDisplayingPage = pageIndex - pageButtonCount + 1;\n            }\n\n            this._callEventHandler(this.onPageChanged, {\n                pageIndex: pageIndex\n            });\n        },\n\n        _controllerCall: function(method, param, isCanceled, doneCallback) {\n            if(isCanceled)\n                return $.Deferred().reject().promise();\n\n            this._showLoading();\n\n            var controller = this._controller;\n            if(!controller || !controller[method]) {\n                throw Error(\"controller has no method '\" + method + \"'\");\n            }\n\n            return normalizePromise(controller[method](param))\n                .done($.proxy(doneCallback, this))\n                .fail($.proxy(this._errorHandler, this))\n                .always($.proxy(this._hideLoading, this));\n        },\n\n        _errorHandler: function() {\n            this._callEventHandler(this.onError, {\n                args: $.makeArray(arguments)\n            });\n        },\n\n        _showLoading: function() {\n            if(!this.loadIndication)\n                return;\n\n            clearTimeout(this._loadingTimer);\n\n            this._loadingTimer = setTimeout($.proxy(function() {\n                this._loadIndicator.show();\n            }, this), this.loadIndicationDelay);\n        },\n\n        _hideLoading: function() {\n            if(!this.loadIndication)\n                return;\n\n            clearTimeout(this._loadingTimer);\n            this._loadIndicator.hide();\n        },\n\n        search: function(filter) {\n            this._resetSorting();\n            this._resetPager();\n            return this.loadData(filter);\n        },\n\n        loadData: function(filter) {\n            filter = filter || (this.filtering ? this.getFilter() : {});\n\n            $.extend(filter, this._loadStrategy.loadParams(), this._sortingParams());\n\n            var args = this._callEventHandler(this.onDataLoading, {\n                filter: filter\n            });\n\n            return this._controllerCall(\"loadData\", filter, args.cancel, function(loadedData) {\n                if(!loadedData)\n                    return;\n\n                this._loadStrategy.finishLoad(loadedData);\n\n                this._callEventHandler(this.onDataLoaded, {\n                    data: loadedData\n                });\n            });\n        },\n\n        getFilter: function() {\n            var result = {};\n            this._eachField(function(field) {\n                if(field.filtering) {\n                    this._setItemFieldValue(result, field, field.filterValue());\n                }\n            });\n            return result;\n        },\n\n        _sortingParams: function() {\n            if(this.sorting && this._sortField) {\n                return {\n                    sortField: this._sortField.name,\n                    sortOrder: this._sortOrder\n                };\n            }\n            return {};\n        },\n\n        getSorting: function() {\n            var sortingParams = this._sortingParams();\n            return {\n                field: sortingParams.sortField,\n                order: sortingParams.sortOrder\n            };\n        },\n\n        clearFilter: function() {\n            var $filterRow = this._createFilterRow();\n            this._filterRow.replaceWith($filterRow);\n            this._filterRow = $filterRow;\n            return this.search();\n        },\n\n        insertItem: function(item) {\n            var insertingItem = item || this._getValidatedInsertItem();\n\n            if(!insertingItem)\n                return $.Deferred().reject().promise();\n\n            var args = this._callEventHandler(this.onItemInserting, {\n                item: insertingItem\n            });\n\n            return this._controllerCall(\"insertItem\", insertingItem, args.cancel, function(insertedItem) {\n                insertedItem = insertedItem || insertingItem;\n                this._loadStrategy.finishInsert(insertedItem);\n\n                this._callEventHandler(this.onItemInserted, {\n                    item: insertedItem\n                });\n            });\n        },\n\n        _getValidatedInsertItem: function() {\n            var item = this._getInsertItem();\n            return this._validateItem(item, this._insertRow) ? item : null;\n        },\n\n        _getInsertItem: function() {\n            var result = {};\n            this._eachField(function(field) {\n                if(field.inserting) {\n                    this._setItemFieldValue(result, field, field.insertValue());\n                }\n            });\n            return result;\n        },\n\n        _validateItem: function(item, $row) {\n            var validationErrors = [];\n\n            var args = {\n                item: item,\n                itemIndex: this._rowIndex($row),\n                row: $row\n            };\n\n            this._eachField(function(field) {\n                if(!field.validate ||\n                   ($row === this._insertRow && !field.inserting) ||\n                   ($row === this._getEditRow() && !field.editing))\n                    return;\n\n                var fieldValue = this._getItemFieldValue(item, field);\n\n                var errors = this._validation.validate($.extend({\n                    value: fieldValue,\n                    rules: field.validate\n                }, args));\n\n                this._setCellValidity($row.children().eq(this._visibleFieldIndex(field)), errors);\n\n                if(!errors.length)\n                    return;\n\n                validationErrors.push.apply(validationErrors,\n                    $.map(errors, function(message) {\n                        return { field: field, message: message };\n                    }));\n            });\n\n            if(!validationErrors.length)\n                return true;\n\n            var invalidArgs = $.extend({\n                errors: validationErrors\n            }, args);\n            this._callEventHandler(this.onItemInvalid, invalidArgs);\n            this.invalidNotify(invalidArgs);\n\n            return false;\n        },\n\n        _setCellValidity: function($cell, errors) {\n            $cell\n                .toggleClass(this.invalidClass, !!errors.length)\n                .attr(\"title\", errors.join(\"\\n\"));\n        },\n\n        clearInsert: function() {\n            var insertRow = this._createInsertRow();\n            this._insertRow.replaceWith(insertRow);\n            this._insertRow = insertRow;\n            this.refresh();\n        },\n\n        editItem: function(item) {\n            var $row = this.rowByItem(item);\n            if($row.length) {\n                this._editRow($row);\n            }\n        },\n\n        rowByItem: function(item) {\n            if(item.jquery || item.nodeType)\n                return $(item);\n\n            return this._content.find(\"tr\").filter(function() {\n                return $.data(this, JSGRID_ROW_DATA_KEY) === item;\n            });\n        },\n\n        _editRow: function($row) {\n            if(!this.editing)\n                return;\n\n            var item = $row.data(JSGRID_ROW_DATA_KEY);\n\n            var args = this._callEventHandler(this.onItemEditing, {\n                row: $row,\n                item: item,\n                itemIndex: this._itemIndex(item)\n            });\n\n            if(args.cancel)\n                return;\n\n            if(this._editingRow) {\n                this.cancelEdit();\n            }\n\n            var $editRow = this._createEditRow(item);\n\n            this._editingRow = $row;\n            $row.hide();\n            $editRow.insertBefore($row);\n            $row.data(JSGRID_EDIT_ROW_DATA_KEY, $editRow);\n        },\n\n        _createEditRow: function(item) {\n            if($.isFunction(this.editRowRenderer)) {\n                return $(this.renderTemplate(this.editRowRenderer, this, { item: item, itemIndex: this._itemIndex(item) }));\n            }\n\n            var $result = $(\"<tr>\").addClass(this.editRowClass);\n\n            this._eachField(function(field) {\n                var fieldValue = this._getItemFieldValue(item, field);\n\n                this._prepareCell(\"<td>\", field, \"editcss\")\n                    .append(this.renderTemplate(field.editTemplate || \"\", field, { value: fieldValue, item: item }))\n                    .appendTo($result);\n            });\n\n            return $result;\n        },\n\n        updateItem: function(item, editedItem) {\n            if(arguments.length === 1) {\n                editedItem = item;\n            }\n\n            var $row = item ? this.rowByItem(item) : this._editingRow;\n            editedItem = editedItem || this._getValidatedEditedItem();\n\n            if(!editedItem)\n                return;\n\n            return this._updateRow($row, editedItem);\n        },\n\n        _getValidatedEditedItem: function() {\n            var item = this._getEditedItem();\n            return this._validateItem(item, this._getEditRow()) ? item : null;\n        },\n\n        _updateRow: function($updatingRow, editedItem) {\n            var updatingItem = $updatingRow.data(JSGRID_ROW_DATA_KEY),\n                updatingItemIndex = this._itemIndex(updatingItem),\n                updatedItem = $.extend(true, {}, updatingItem, editedItem);\n\n            var args = this._callEventHandler(this.onItemUpdating, {\n                row: $updatingRow,\n                item: updatedItem,\n                itemIndex: updatingItemIndex,\n                previousItem: updatingItem\n            });\n\n            return this._controllerCall(\"updateItem\", updatedItem, args.cancel, function(loadedUpdatedItem) {\n                var previousItem = $.extend(true, {}, updatingItem);\n                updatedItem = loadedUpdatedItem || $.extend(true, updatingItem, editedItem);\n\n                var $updatedRow = this._finishUpdate($updatingRow, updatedItem, updatingItemIndex);\n\n                this._callEventHandler(this.onItemUpdated, {\n                    row: $updatedRow,\n                    item: updatedItem,\n                    itemIndex: updatingItemIndex,\n                    previousItem: previousItem\n                });\n            });\n        },\n\n        _rowIndex: function(row) {\n            return this._content.children().index($(row));\n        },\n\n        _itemIndex: function(item) {\n            return $.inArray(item, this.data);\n        },\n\n        _finishUpdate: function($updatingRow, updatedItem, updatedItemIndex) {\n            this.cancelEdit();\n            this.data[updatedItemIndex] = updatedItem;\n\n            var $updatedRow = this._createRow(updatedItem, updatedItemIndex);\n            $updatingRow.replaceWith($updatedRow);\n            return $updatedRow;\n        },\n\n        _getEditedItem: function() {\n            var result = {};\n            this._eachField(function(field) {\n                if(field.editing) {\n                    this._setItemFieldValue(result, field, field.editValue());\n                }\n            });\n            return result;\n        },\n\n        cancelEdit: function() {\n            if(!this._editingRow)\n                return;\n\n            this._getEditRow().remove();\n            this._editingRow.show();\n            this._editingRow = null;\n        },\n\n        _getEditRow: function() {\n            return this._editingRow && this._editingRow.data(JSGRID_EDIT_ROW_DATA_KEY);\n        },\n\n        deleteItem: function(item) {\n            var $row = this.rowByItem(item);\n\n            if(!$row.length)\n                return;\n\n            if(this.confirmDeleting && !window.confirm(getOrApply(this.deleteConfirm, this, $row.data(JSGRID_ROW_DATA_KEY))))\n                return;\n\n            return this._deleteRow($row);\n        },\n\n        _deleteRow: function($row) {\n            var deletingItem = $row.data(JSGRID_ROW_DATA_KEY),\n                deletingItemIndex = this._itemIndex(deletingItem);\n\n            var args = this._callEventHandler(this.onItemDeleting, {\n                row: $row,\n                item: deletingItem,\n                itemIndex: deletingItemIndex\n            });\n\n            return this._controllerCall(\"deleteItem\", deletingItem, args.cancel, function() {\n                this._loadStrategy.finishDelete(deletingItem, deletingItemIndex);\n\n                this._callEventHandler(this.onItemDeleted, {\n                    row: $row,\n                    item: deletingItem,\n                    itemIndex: deletingItemIndex\n                });\n            });\n        }\n    };\n\n    $.fn.jsGrid = function(config) {\n        var args = $.makeArray(arguments),\n            methodArgs = args.slice(1),\n            result = this;\n\n        this.each(function() {\n            var $element = $(this),\n                instance = $element.data(JSGRID_DATA_KEY),\n                methodResult;\n\n            if(instance) {\n                if(typeof config === \"string\") {\n                    methodResult = instance[config].apply(instance, methodArgs);\n                    if(methodResult !== undefined && methodResult !== instance) {\n                        result = methodResult;\n                        return false;\n                    }\n                } else {\n                    instance._detachWindowResizeCallback();\n                    instance._init(config);\n                    instance.render();\n                }\n            } else {\n                new Grid($element, config);\n            }\n        });\n\n        return result;\n    };\n\n    var fields = {};\n\n    var setDefaults = function(config) {\n        var componentPrototype;\n\n        if($.isPlainObject(config)) {\n            componentPrototype = Grid.prototype;\n        } else {\n            componentPrototype = fields[config].prototype;\n            config = arguments[1] || {};\n        }\n\n        $.extend(componentPrototype, config);\n    };\n\n    var locales = {};\n\n    var locale = function(lang) {\n        var localeConfig = $.isPlainObject(lang) ? lang : locales[lang];\n\n        if(!localeConfig)\n            throw Error(\"unknown locale \" + lang);\n\n        setLocale(jsGrid, localeConfig);\n    };\n\n    var setLocale = function(obj, localeConfig) {\n        $.each(localeConfig, function(field, value) {\n            if($.isPlainObject(value)) {\n                setLocale(obj[field] || obj[field[0].toUpperCase() + field.slice(1)], value);\n                return;\n            }\n\n            if(obj.hasOwnProperty(field)) {\n                obj[field] = value;\n            } else {\n                obj.prototype[field] = value;\n            }\n        });\n    };\n\n    window.jsGrid = {\n        Grid: Grid,\n        fields: fields,\n        setDefaults: setDefaults,\n        locales: locales,\n        locale: locale,\n        version: '1.5.3'\n    };\n\n}(window, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    function LoadIndicator(config) {\n        this._init(config);\n    }\n\n    LoadIndicator.prototype = {\n\n        container: \"body\",\n        message: \"Loading...\",\n        shading: true,\n\n        zIndex: 1000,\n        shaderClass: \"jsgrid-load-shader\",\n        loadPanelClass: \"jsgrid-load-panel\",\n\n        _init: function(config) {\n            $.extend(true, this, config);\n\n            this._initContainer();\n            this._initShader();\n            this._initLoadPanel();\n        },\n\n        _initContainer: function() {\n            this._container = $(this.container);\n        },\n\n        _initShader: function() {\n            if(!this.shading)\n                return;\n\n            this._shader = $(\"<div>\").addClass(this.shaderClass)\n                .hide()\n                .css({\n                    position: \"absolute\",\n                    top: 0,\n                    right: 0,\n                    bottom: 0,\n                    left: 0,\n                    zIndex: this.zIndex\n                })\n                .appendTo(this._container);\n        },\n\n        _initLoadPanel: function() {\n            this._loadPanel = $(\"<div>\").addClass(this.loadPanelClass)\n                .text(this.message)\n                .hide()\n                .css({\n                    position: \"absolute\",\n                    top: \"50%\",\n                    left: \"50%\",\n                    zIndex: this.zIndex\n                })\n                .appendTo(this._container);\n        },\n\n        show: function() {\n            var $loadPanel = this._loadPanel.show();\n\n            var actualWidth = $loadPanel.outerWidth();\n            var actualHeight = $loadPanel.outerHeight();\n\n            $loadPanel.css({\n                marginTop: -actualHeight / 2,\n                marginLeft: -actualWidth / 2\n            });\n\n            this._shader.show();\n        },\n\n        hide: function() {\n            this._loadPanel.hide();\n            this._shader.hide();\n        }\n\n    };\n\n    jsGrid.LoadIndicator = LoadIndicator;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    function DirectLoadingStrategy(grid) {\n        this._grid = grid;\n    }\n\n    DirectLoadingStrategy.prototype = {\n\n        firstDisplayIndex: function() {\n            var grid = this._grid;\n            return grid.option(\"paging\") ? (grid.option(\"pageIndex\") - 1) * grid.option(\"pageSize\") : 0;\n        },\n\n        lastDisplayIndex: function() {\n            var grid = this._grid;\n            var itemsCount = grid.option(\"data\").length;\n\n            return grid.option(\"paging\")\n                ? Math.min(grid.option(\"pageIndex\") * grid.option(\"pageSize\"), itemsCount)\n                : itemsCount;\n        },\n\n        itemsCount: function() {\n            return this._grid.option(\"data\").length;\n        },\n\n        openPage: function(index) {\n            this._grid.refresh();\n        },\n\n        loadParams: function() {\n            return {};\n        },\n\n        sort: function() {\n            this._grid._sortData();\n            this._grid.refresh();\n            return $.Deferred().resolve().promise();\n        },\n\n        reset: function() {\n            this._grid.refresh();\n            return $.Deferred().resolve().promise();\n        },\n\n        finishLoad: function(loadedData) {\n            this._grid.option(\"data\", loadedData);\n        },\n\n        finishInsert: function(insertedItem) {\n            var grid = this._grid;\n            grid.option(\"data\").push(insertedItem);\n            grid.refresh();\n        },\n\n        finishDelete: function(deletedItem, deletedItemIndex) {\n            var grid = this._grid;\n            grid.option(\"data\").splice(deletedItemIndex, 1);\n            grid.reset();\n        }\n    };\n\n\n    function PageLoadingStrategy(grid) {\n        this._grid = grid;\n        this._itemsCount = 0;\n    }\n\n    PageLoadingStrategy.prototype = {\n\n        firstDisplayIndex: function() {\n            return 0;\n        },\n\n        lastDisplayIndex: function() {\n            return this._grid.option(\"data\").length;\n        },\n\n        itemsCount: function() {\n            return this._itemsCount;\n        },\n\n        openPage: function(index) {\n            this._grid.loadData();\n        },\n\n        loadParams: function() {\n            var grid = this._grid;\n            return {\n                pageIndex: grid.option(\"pageIndex\"),\n                pageSize: grid.option(\"pageSize\")\n            };\n        },\n\n        reset: function() {\n            return this._grid.loadData();\n        },\n\n        sort: function() {\n            return this._grid.loadData();\n        },\n\n        finishLoad: function(loadedData) {\n            this._itemsCount = loadedData.itemsCount;\n            this._grid.option(\"data\", loadedData.data);\n        },\n\n        finishInsert: function(insertedItem) {\n            this._grid.search();\n        },\n\n        finishDelete: function(deletedItem, deletedItemIndex) {\n            this._grid.search();\n        }\n    };\n\n    jsGrid.loadStrategies = {\n        DirectLoadingStrategy: DirectLoadingStrategy,\n        PageLoadingStrategy: PageLoadingStrategy\n    };\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var isDefined = function(val) {\n        return typeof(val) !== \"undefined\" && val !== null;\n    };\n\n    var sortStrategies = {\n        string: function(str1, str2) {\n            if(!isDefined(str1) && !isDefined(str2))\n                return 0;\n\n            if(!isDefined(str1))\n                return -1;\n\n            if(!isDefined(str2))\n                return 1;\n\n            return (\"\" + str1).localeCompare(\"\" + str2);\n        },\n\n        number: function(n1, n2) {\n            return n1 - n2;\n        },\n\n        date: function(dt1, dt2) {\n            return dt1 - dt2;\n        },\n\n        numberAsString: function(n1, n2) {\n            return parseFloat(n1) - parseFloat(n2);\n        }\n    };\n\n    jsGrid.sortStrategies = sortStrategies;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    function Validation(config) {\n        this._init(config);\n    }\n\n    Validation.prototype = {\n\n        _init: function(config) {\n            $.extend(true, this, config);\n        },\n\n        validate: function(args) {\n            var errors = [];\n\n            $.each(this._normalizeRules(args.rules), function(_, rule) {\n                if(rule.validator(args.value, args.item, rule.param))\n                    return;\n\n                var errorMessage = $.isFunction(rule.message) ? rule.message(args.value, args.item) : rule.message;\n                errors.push(errorMessage);\n            });\n\n            return errors;\n        },\n\n        _normalizeRules: function(rules) {\n            if(!$.isArray(rules))\n                rules = [rules];\n\n            return $.map(rules, $.proxy(function(rule) {\n                return this._normalizeRule(rule);\n            }, this));\n        },\n\n        _normalizeRule: function(rule) {\n            if(typeof rule === \"string\")\n                rule = { validator: rule };\n\n            if($.isFunction(rule))\n                rule = { validator: rule };\n\n            if($.isPlainObject(rule))\n                rule = $.extend({}, rule);\n            else\n                throw Error(\"wrong validation config specified\");\n\n            if($.isFunction(rule.validator))\n                return rule;\n\n            return this._applyNamedValidator(rule, rule.validator);\n        },\n\n        _applyNamedValidator: function(rule, validatorName) {\n            delete rule.validator;\n\n            var validator = validators[validatorName];\n            if(!validator)\n                throw Error(\"unknown validator \\\"\" + validatorName + \"\\\"\");\n\n            if($.isFunction(validator)) {\n                validator = { validator: validator };\n            }\n\n            return $.extend({}, validator, rule);\n        }\n    };\n\n    jsGrid.Validation = Validation;\n\n\n    var validators = {\n        required: {\n            message: \"Field is required\",\n            validator: function(value) {\n                return value !== undefined && value !== null && value !== \"\";\n            }\n        },\n\n        rangeLength: {\n            message: \"Field value length is out of the defined range\",\n            validator: function(value, _, param) {\n                return value.length >= param[0] && value.length <= param[1];\n            }\n        },\n\n        minLength: {\n            message: \"Field value is too short\",\n            validator: function(value, _, param) {\n                return value.length >= param;\n            }\n        },\n\n        maxLength: {\n            message: \"Field value is too long\",\n            validator: function(value, _, param) {\n                return value.length <= param;\n            }\n        },\n\n        pattern: {\n            message: \"Field value is not matching the defined pattern\",\n            validator: function(value, _, param) {\n                if(typeof param === \"string\") {\n                    param = new RegExp(\"^(?:\" + param + \")$\");\n                }\n                return param.test(value);\n            }\n        },\n\n        range: {\n            message: \"Field value is out of the defined range\",\n            validator: function(value, _, param) {\n                return value >= param[0] && value <= param[1];\n            }\n        },\n\n        min: {\n            message: \"Field value is too small\",\n            validator: function(value, _, param) {\n                return value >= param;\n            }\n        },\n\n        max: {\n            message: \"Field value is too large\",\n            validator: function(value, _, param) {\n                return value <= param;\n            }\n        }\n    };\n\n    jsGrid.validators = validators;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    function Field(config) {\n        $.extend(true, this, config);\n        this.sortingFunc = this._getSortingFunc();\n    }\n\n    Field.prototype = {\n        name: \"\",\n        title: null,\n        css: \"\",\n        align: \"\",\n        width: 100,\n\n        visible: true,\n        filtering: true,\n        inserting: true,\n        editing: true,\n        sorting: true,\n        sorter: \"string\", // name of SortStrategy or function to compare elements\n\n        headerTemplate: function() {\n            return (this.title === undefined || this.title === null) ? this.name : this.title;\n        },\n\n        itemTemplate: function(value, item) {\n            return value;\n        },\n\n        filterTemplate: function() {\n            return \"\";\n        },\n\n        insertTemplate: function() {\n            return \"\";\n        },\n\n        editTemplate: function(value, item) {\n            this._value = value;\n            return this.itemTemplate(value, item);\n        },\n\n        filterValue: function() {\n            return \"\";\n        },\n\n        insertValue: function() {\n            return \"\";\n        },\n\n        editValue: function() {\n            return this._value;\n        },\n\n        _getSortingFunc: function() {\n            var sorter = this.sorter;\n\n            if($.isFunction(sorter)) {\n                return sorter;\n            }\n\n            if(typeof sorter === \"string\") {\n                return jsGrid.sortStrategies[sorter];\n            }\n\n            throw Error(\"wrong sorter for the field \\\"\" + this.name + \"\\\"!\");\n        }\n    };\n\n    jsGrid.Field = Field;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var Field = jsGrid.Field;\n\n    function TextField(config) {\n        Field.call(this, config);\n    }\n\n    TextField.prototype = new Field({\n\n        autosearch: true,\n\t\treadOnly: false,\n\n        filterTemplate: function() {\n            if(!this.filtering)\n                return \"\";\n\n            var grid = this._grid,\n                $result = this.filterControl = this._createTextBox();\n\n            if(this.autosearch) {\n                $result.on(\"keypress\", function(e) {\n                    if(e.which === 13) {\n                        grid.search();\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            return $result;\n        },\n\n        insertTemplate: function() {\n            if(!this.inserting)\n                return \"\";\n\n            return this.insertControl = this._createTextBox();\n        },\n\n        editTemplate: function(value) {\n            if(!this.editing)\n                return this.itemTemplate.apply(this, arguments);\n\n            var $result = this.editControl = this._createTextBox();\n            $result.val(value);\n            return $result;\n        },\n\n        filterValue: function() {\n            return this.filterControl.val();\n        },\n\n        insertValue: function() {\n            return this.insertControl.val();\n        },\n\n        editValue: function() {\n            return this.editControl.val();\n        },\n\n        _createTextBox: function() {\n            return $(\"<input>\").attr(\"type\", \"text\")\n                .prop(\"readonly\", !!this.readOnly);\n        }\n    });\n\n    jsGrid.fields.text = jsGrid.TextField = TextField;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var TextField = jsGrid.TextField;\n\n    function NumberField(config) {\n        TextField.call(this, config);\n    }\n\n    NumberField.prototype = new TextField({\n\n        sorter: \"number\",\n        align: \"right\",\n\t\treadOnly: false,\n\n        filterValue: function() {\n            return this.filterControl.val()\n                ? parseInt(this.filterControl.val() || 0, 10)\n                : undefined;\n        },\n\n        insertValue: function() {\n            return this.insertControl.val()\n                ? parseInt(this.insertControl.val() || 0, 10)\n                : undefined;\n        },\n\n        editValue: function() {\n            return this.editControl.val()\n                ? parseInt(this.editControl.val() || 0, 10)\n                : undefined;\n        },\n\n        _createTextBox: function() {\n\t\t\treturn $(\"<input>\").attr(\"type\", \"number\")\n                .prop(\"readonly\", !!this.readOnly);\n        }\n    });\n\n    jsGrid.fields.number = jsGrid.NumberField = NumberField;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var TextField = jsGrid.TextField;\n\n    function TextAreaField(config) {\n        TextField.call(this, config);\n    }\n\n    TextAreaField.prototype = new TextField({\n\n        insertTemplate: function() {\n            if(!this.inserting)\n                return \"\";\n\n            return this.insertControl = this._createTextArea();\n        },\n\n        editTemplate: function(value) {\n            if(!this.editing)\n                return this.itemTemplate.apply(this, arguments);\n\n            var $result = this.editControl = this._createTextArea();\n            $result.val(value);\n            return $result;\n        },\n\n        _createTextArea: function() {\n            return $(\"<textarea>\").prop(\"readonly\", !!this.readOnly);\n        }\n    });\n\n    jsGrid.fields.textarea = jsGrid.TextAreaField = TextAreaField;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var NumberField = jsGrid.NumberField;\n    var numberValueType = \"number\";\n    var stringValueType = \"string\";\n\n    function SelectField(config) {\n        this.items = [];\n        this.selectedIndex = -1;\n        this.valueField = \"\";\n        this.textField = \"\";\n\n        if(config.valueField && config.items.length) {\n            var firstItemValue = config.items[0][config.valueField];\n            this.valueType = (typeof firstItemValue) === numberValueType ? numberValueType : stringValueType;\n        }\n\n        this.sorter = this.valueType;\n\n        NumberField.call(this, config);\n    }\n\n    SelectField.prototype = new NumberField({\n\n        align: \"center\",\n        valueType: numberValueType,\n\n        itemTemplate: function(value) {\n            var items = this.items,\n                valueField = this.valueField,\n                textField = this.textField,\n                resultItem;\n\n            if(valueField) {\n                resultItem = $.grep(items, function(item, index) {\n                    return item[valueField] === value;\n                })[0] || {};\n            }\n            else {\n                resultItem = items[value];\n            }\n\n            var result = (textField ? resultItem[textField] : resultItem);\n\n            return (result === undefined || result === null) ? \"\" : result;\n        },\n\n        filterTemplate: function() {\n            if(!this.filtering)\n                return \"\";\n\n            var grid = this._grid,\n                $result = this.filterControl = this._createSelect();\n\n            if(this.autosearch) {\n                $result.on(\"change\", function(e) {\n                    grid.search();\n                });\n            }\n\n            return $result;\n        },\n\n        insertTemplate: function() {\n            if(!this.inserting)\n                return \"\";\n\n            return this.insertControl = this._createSelect();\n        },\n\n        editTemplate: function(value) {\n            if(!this.editing)\n                return this.itemTemplate.apply(this, arguments);\n\n            var $result = this.editControl = this._createSelect();\n            (value !== undefined) && $result.val(value);\n            return $result;\n        },\n\n        filterValue: function() {\n            var val = this.filterControl.val();\n            return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n        },\n\n        insertValue: function() {\n            var val = this.insertControl.val();\n            return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n        },\n\n        editValue: function() {\n            var val = this.editControl.val();\n            return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n        },\n\n        _createSelect: function() {\n            var $result = $(\"<select>\"),\n                valueField = this.valueField,\n                textField = this.textField,\n                selectedIndex = this.selectedIndex;\n\n            $.each(this.items, function(index, item) {\n                var value = valueField ? item[valueField] : index,\n                    text = textField ? item[textField] : item;\n\n                var $option = $(\"<option>\")\n                    .attr(\"value\", value)\n                    .text(text)\n                    .appendTo($result);\n\n                $option.prop(\"selected\", (selectedIndex === index));\n            });\n\n            $result.prop(\"disabled\", !!this.readOnly);\n\n            return $result;\n        }\n    });\n\n    jsGrid.fields.select = jsGrid.SelectField = SelectField;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var Field = jsGrid.Field;\n\n    function CheckboxField(config) {\n        Field.call(this, config);\n    }\n\n    CheckboxField.prototype = new Field({\n\n        sorter: \"number\",\n        align: \"center\",\n        autosearch: true,\n\n        itemTemplate: function(value) {\n            return this._createCheckbox().prop({\n                checked: value,\n                disabled: true\n            });\n        },\n\n        filterTemplate: function() {\n            if(!this.filtering)\n                return \"\";\n\n            var grid = this._grid,\n                $result = this.filterControl = this._createCheckbox();\n\n            $result.prop({\n                readOnly: true,\n                indeterminate: true\n            });\n\n            $result.on(\"click\", function() {\n                var $cb = $(this);\n\n                if($cb.prop(\"readOnly\")) {\n                    $cb.prop({\n                        checked: false,\n                        readOnly: false\n                    });\n                }\n                else if(!$cb.prop(\"checked\")) {\n                    $cb.prop({\n                        readOnly: true,\n                        indeterminate: true\n                    });\n                }\n            });\n\n            if(this.autosearch) {\n                $result.on(\"click\", function() {\n                    grid.search();\n                });\n            }\n\n            return $result;\n        },\n\n        insertTemplate: function() {\n            if(!this.inserting)\n                return \"\";\n\n            return this.insertControl = this._createCheckbox();\n        },\n\n        editTemplate: function(value) {\n            if(!this.editing)\n                return this.itemTemplate.apply(this, arguments);\n\n            var $result = this.editControl = this._createCheckbox();\n            $result.prop(\"checked\", value);\n            return $result;\n        },\n\n        filterValue: function() {\n            return this.filterControl.get(0).indeterminate\n                ? undefined\n                : this.filterControl.is(\":checked\");\n        },\n\n        insertValue: function() {\n            return this.insertControl.is(\":checked\");\n        },\n\n        editValue: function() {\n            return this.editControl.is(\":checked\");\n        },\n\n        _createCheckbox: function() {\n            return $(\"<input>\").attr(\"type\", \"checkbox\");\n        }\n    });\n\n    jsGrid.fields.checkbox = jsGrid.CheckboxField = CheckboxField;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var Field = jsGrid.Field;\n\n    function ControlField(config) {\n        Field.call(this, config);\n        this._configInitialized = false;\n    }\n\n    ControlField.prototype = new Field({\n        css: \"jsgrid-control-field\",\n        align: \"center\",\n        width: 50,\n        filtering: false,\n        inserting: false,\n        editing: false,\n        sorting: false,\n\n        buttonClass: \"jsgrid-button\",\n        modeButtonClass: \"jsgrid-mode-button\",\n\n        modeOnButtonClass: \"jsgrid-mode-on-button\",\n        searchModeButtonClass: \"jsgrid-search-mode-button\",\n        insertModeButtonClass: \"jsgrid-insert-mode-button\",\n        editButtonClass: \"jsgrid-edit-button\",\n        deleteButtonClass: \"jsgrid-delete-button\",\n        searchButtonClass: \"jsgrid-search-button\",\n        clearFilterButtonClass: \"jsgrid-clear-filter-button\",\n        insertButtonClass: \"jsgrid-insert-button\",\n        updateButtonClass: \"jsgrid-update-button\",\n        cancelEditButtonClass: \"jsgrid-cancel-edit-button\",\n\n        searchModeButtonTooltip: \"Switch to searching\",\n        insertModeButtonTooltip: \"Switch to inserting\",\n        editButtonTooltip: \"Edit\",\n        deleteButtonTooltip: \"Delete\",\n        searchButtonTooltip: \"Search\",\n        clearFilterButtonTooltip: \"Clear filter\",\n        insertButtonTooltip: \"Insert\",\n        updateButtonTooltip: \"Update\",\n        cancelEditButtonTooltip: \"Cancel edit\",\n\n        editButton: true,\n        deleteButton: true,\n        clearFilterButton: true,\n        modeSwitchButton: true,\n\n        _initConfig: function() {\n            this._hasFiltering = this._grid.filtering;\n            this._hasInserting = this._grid.inserting;\n\n            if(this._hasInserting && this.modeSwitchButton) {\n                this._grid.inserting = false;\n            }\n\n            this._configInitialized = true;\n        },\n\n        headerTemplate: function() {\n            if(!this._configInitialized) {\n                this._initConfig();\n            }\n\n            var hasFiltering = this._hasFiltering;\n            var hasInserting = this._hasInserting;\n\n            if(!this.modeSwitchButton || (!hasFiltering && !hasInserting))\n                return \"\";\n\n            if(hasFiltering && !hasInserting)\n                return this._createFilterSwitchButton();\n\n            if(hasInserting && !hasFiltering)\n                return this._createInsertSwitchButton();\n\n            return this._createModeSwitchButton();\n        },\n\n        itemTemplate: function(value, item) {\n            var $result = $([]);\n\n            if(this.editButton) {\n                $result = $result.add(this._createEditButton(item));\n            }\n\n            if(this.deleteButton) {\n                $result = $result.add(this._createDeleteButton(item));\n            }\n\n            return $result;\n        },\n\n        filterTemplate: function() {\n            var $result = this._createSearchButton();\n            return this.clearFilterButton ? $result.add(this._createClearFilterButton()) : $result;\n        },\n\n        insertTemplate: function() {\n            return this._createInsertButton();\n        },\n\n        editTemplate: function() {\n            return this._createUpdateButton().add(this._createCancelEditButton());\n        },\n\n        _createFilterSwitchButton: function() {\n            return this._createOnOffSwitchButton(\"filtering\", this.searchModeButtonClass, true);\n        },\n\n        _createInsertSwitchButton: function() {\n            return this._createOnOffSwitchButton(\"inserting\", this.insertModeButtonClass, false);\n        },\n\n        _createOnOffSwitchButton: function(option, cssClass, isOnInitially) {\n            var isOn = isOnInitially;\n\n            var updateButtonState = $.proxy(function() {\n                $button.toggleClass(this.modeOnButtonClass, isOn);\n            }, this);\n\n            var $button = this._createGridButton(this.modeButtonClass + \" \" + cssClass, \"\", function(grid) {\n                isOn = !isOn;\n                grid.option(option, isOn);\n                updateButtonState();\n            });\n\n            updateButtonState();\n\n            return $button;\n        },\n\n        _createModeSwitchButton: function() {\n            var isInserting = false;\n\n            var updateButtonState = $.proxy(function() {\n                $button.attr(\"title\", isInserting ? this.searchModeButtonTooltip : this.insertModeButtonTooltip)\n                    .toggleClass(this.insertModeButtonClass, !isInserting)\n                    .toggleClass(this.searchModeButtonClass, isInserting);\n            }, this);\n\n            var $button = this._createGridButton(this.modeButtonClass, \"\", function(grid) {\n                isInserting = !isInserting;\n                grid.option(\"inserting\", isInserting);\n                grid.option(\"filtering\", !isInserting);\n                updateButtonState();\n            });\n\n            updateButtonState();\n\n            return $button;\n        },\n\n        _createEditButton: function(item) {\n            return this._createGridButton(this.editButtonClass, this.editButtonTooltip, function(grid, e) {\n                grid.editItem(item);\n                e.stopPropagation();\n            });\n        },\n\n        _createDeleteButton: function(item) {\n            return this._createGridButton(this.deleteButtonClass, this.deleteButtonTooltip, function(grid, e) {\n                grid.deleteItem(item);\n                e.stopPropagation();\n            });\n        },\n\n        _createSearchButton: function() {\n            return this._createGridButton(this.searchButtonClass, this.searchButtonTooltip, function(grid) {\n                grid.search();\n            });\n        },\n\n        _createClearFilterButton: function() {\n            return this._createGridButton(this.clearFilterButtonClass, this.clearFilterButtonTooltip, function(grid) {\n                grid.clearFilter();\n            });\n        },\n\n        _createInsertButton: function() {\n            return this._createGridButton(this.insertButtonClass, this.insertButtonTooltip, function(grid) {\n                grid.insertItem().done(function() {\n                    grid.clearInsert();\n                });\n            });\n        },\n\n        _createUpdateButton: function() {\n            return this._createGridButton(this.updateButtonClass, this.updateButtonTooltip, function(grid, e) {\n                grid.updateItem();\n                e.stopPropagation();\n            });\n        },\n\n        _createCancelEditButton: function() {\n            return this._createGridButton(this.cancelEditButtonClass, this.cancelEditButtonTooltip, function(grid, e) {\n                grid.cancelEdit();\n                e.stopPropagation();\n            });\n        },\n\n        _createGridButton: function(cls, tooltip, clickHandler) {\n            var grid = this._grid;\n\n            return $(\"<input>\").addClass(this.buttonClass)\n                .addClass(cls)\n                .attr({\n                    type: \"button\",\n                    title: tooltip\n                })\n                .on(\"click\", function(e) {\n                    clickHandler(grid, e);\n                });\n        },\n\n        editValue: function() {\n            return \"\";\n        }\n\n    });\n\n    jsGrid.fields.control = jsGrid.ControlField = ControlField;\n\n}(jsGrid, jQuery));\n"]},"metadata":{},"sourceType":"script"}